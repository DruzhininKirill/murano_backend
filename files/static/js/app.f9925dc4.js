(function(t){function e(e){for(var s,i,o=e[0],c=e[1],l=e[2],d=0,m=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&m.push(a[i][0]),a[i]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);u&&u(e);while(m.length)m.shift()();return n.push.apply(n,l||[]),r()}function r(){for(var t,e=0;e<n.length;e++){for(var r=n[e],s=!0,o=1;o<r.length;o++){var c=r[o];0!==a[c]&&(s=!1)}s&&(n.splice(e--,1),t=i(i.s=r[0]))}return t}var s={},a={app:0},n=[];function i(e){if(s[e])return s[e].exports;var r=s[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=s,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(r,s,function(e){return t[e]}.bind(null,s));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;n.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"034f":function(t,e,r){"use strict";var s=r("85ec"),a=r.n(s);a.a},"113c":function(t,e,r){t.exports=r.p+"img/default.8609a27a.png"},4720:function(t,e,r){"use strict";var s=r("e336"),a=r.n(s);a.a},"52dd":function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var s,a=r("2b0e"),n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",{attrs:{id:"inspire"}},[r("transition",{attrs:{name:"component-fade",mode:"out-in"}},[r("router-view")],1),r("v-footer",{attrs:{color:"indigo",app:""}},[r("span",{staticClass:"white--text"},[t._v("© 2020 DKA")])])],1)},i=[],o={props:{source:String},data:function(){return{transition:"",drawer:!0}},computed:{loggedIn:function(){return this.$store.getters.loggedIn},permissioned:function(){return this.$store.getters.permissioned},user:function(){return this.$store.getters.logged_user},logo:function(){return this.$store.getters.logo}},methods:{logout:function(){this.$store.dispatch("destroyToken")},user_fio:function(){return void 0==this.user.first_name?" ":this.user.first_name+" "+this.user.last_name}}},c=o,l=(r("034f"),r("2877")),u=Object(l["a"])(c,n,i,!1,null,null,null),d=u.exports,m=r("ce5b"),f=r.n(m),v=(r("bf40"),r("d48d"),r("d1e78"),r("4de4"),r("7db0"),r("c740"),r("4160"),r("a630"),r("a434"),r("b0c0"),r("a9e3"),r("25eb"),r("d3b7"),r("ac1f"),r("3ca3"),r("5319"),r("1276"),r("159b"),r("ddb0"),r("96cf"),r("1da1")),p=r("2f62"),_=r("bc3a"),h=r.n(_),g=h.a.create({baseURL:"https://murano-gamification.herokuapp.com/api/v1/"});g.interceptors.request.use((function(t){return t}),(function(t){return Promise.reject(t)})),g.interceptors.response.use((function(t){return t}),function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("Given token not valid for any token type"!=e.response.data.detail){t.next=7;break}return s||(s=b.dispatch("refreshToken")),t.next=4,s;case 4:return s=null,e.config.headers.Authorization="Bearer "+b.getters.token_a,t.abrupt("return",g(e.config));case 7:return"Token is invalid or expired"==e.response.data.detail&&(localStorage.setItem("auth_token_access",0),localStorage.setItem("auth_token_refresh",0),window.location.reload()),t.abrupt("return",Promise.reject(e));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),a["default"].use(p["a"]);var b=new p["a"].Store({state:{users_list:[],token_r:localStorage.getItem("auth_token_refresh")||"0",token_a:localStorage.getItem("auth_token_access")||"0",shop_items:[],transactions:[],categories:[],logged_user:{},feedback_messages:[],products:[],orders:[],cart:JSON.parse(localStorage.getItem("cart"))||{products:[],numbers:[]},badges:[{badge:"live_help",text:"Готов помочь"},{badge:"local_hospital",text:"На больничном"},{badge:"directions_car",text:"В офис на авто"},{badge:"fiber_new",text:"Новенький"},{badge:"extension",text:"Люблю настольные игры"},{badge:"duo",text:"Работаю удаленно"},{badge:"local_pizza",text:"Хочу пиццу"},{badge:"fitness_center",text:"Спортивный образ жизни"},{badge:"code",text:"Люблю кодить"},{badge:"sports_esports",text:"Побеждаю онлайн"},{badge:"sports_soccer",text:"Ищу пару в кикер"},{badge:"smoking_rooms",text:"Поддержу перекур"},{badge:"local_bar",text:"Свободен на выходных"},{badge:"pets",text:"Есть питомец"},{badge:"menu_book",text:"Посоветую книгу"},{badge:"local_movies",text:"Посоветую фильм"}],logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAABZCAMAAACgyf5cAAAAsVBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+3mHKcAAAAOnRSTlMAkfuMmCDv4AQS8+lMXZU828MI5LtAMncM+NXRnX4uKSamNxahHWRURPVwWMe/s6qCaq6HGg4ry0lQLT9VaQAABwVJREFUaN7M2Ol6ojAUBuAjKrK44i6Ca7VqBbWOtt/9X9g8A4wUYySp2KfvX0VO4lkC9Czl4Vk1VFU1Smd7683zzn5ZG/foN9O3uKFv2l5u/zGy6FfycIdS2uYWp18XebGPVGYrvyzST9KKOt1xUiBEsauVI/0It7s1V2rdfyWuBoQpDadGT9bJ1/Gf94c4ZmfIKFVrGj3LyBngqxbxaC1AMu42PUFvwQZSI64WZA2cMWXLrRpgdSiLvY61lhpl5jWOgEmPtKi3leF86DXe6k1DQapmV6csaBubc4Mxxbg9RHWjn+kV3fbnYjff1lXcYRReHg95UQdHWqvSwyvNGdNcpstuYdsEhzLp0EMWTfCs07PqbhZZo8/3A2dH/AeG5ccAXC1Kl0PAIS5tvKm+GWAVZvQtoxZuMJtx50ijh99VTnTX7CNvM0Xa75I8Kw+WOdnMwvqak4g1RL9crMxNJNVfSdKniWt2vq0RleONTmdFOeuSAK1dHSDB10nCHx9X6rvoxm/4xyMx7wgMSdC0WsIX6lKiAFUkqIXLiaaNQIXEnBAwiiSsPVkh5lskRMshobH5cmE+XIXwAGjEixSmL864aNZIwNjGF2pulFhQPVwHMY7t9gux8nGDlDEdxtvdFUiNFWLNtUUJHQR2TPF7CqB47GCvIB6LUmaOiYiv0X1dxAYVXg9bUlLHQIjpUh2EPkmata8jZB/pniou7DL/8xolvKiIrEaUpBvxfyyvEoVtusSlHRK7zD/bn26M69vNTRsw80XKIkwSgztoeg1E1D1F2BDY5mGZuFD1qytsBLb0TZpj4J9yWsw5i1cdYXilXrIKV4i5t3f6TN82m/CjthoIvblEKUHr/Pcc09s7bVr0fbUgtT/46aqsie4GzQ44XcVF//iEoEnbAVhN6dokyr0ipQXN5oDHP2b3mnHQjzjZgDG+PbnWKeml3mzHbUTYzDv2EbDpUTlgoCc7SzgAp2KneuwpaYfIO+eRC1t6WNmAlxj1Qf0fLEpz5nTd/YpTD12EJvS44xnOdbU4lM5HYMAmzrpQWL8QY46QQ1kYYpMczhWxxGLmuFA+oUKZyKNIoSWA/iuJ2EDuKFFGaDWmbOy8+KWK2ZF7yT8gMT5CNmVlv/zf7UxX8kkESxIQz8odZcUKCscFVJdEdaVaWC4e7tnyoUj85KgvsdUdJV5ipmrxFJPK0oFGqQ6ILChbB6xJRhuRPKWpIGJrlClXelZ5EEyQk/qsjfalj1+uglBKKeh/27fT5kSBIAzAzSGCJ4qIB6gYPFEXxKjp///D1lGQGSBmda0ttoqn8klBXgecQbtTxlAL3mum6fAsD0Pl0qOpaUv9+v5englPk08YerAkHYYYCeDNrAM8b4p39e82qWJkC+/22qRfj1PbCqTJAd6pH5ATRhxqZfQgwdWop6eQGxbGpIYuU6ugV8ZYvwk54iOtugt897zwLVtjH8/ROBO1Pv7odICcOXTwBxzk0FzCB9RcXc4xRajgN6o+5JZiqJkX8zx33WCsZqLcutp4R/gPlM6+YP+yL3+Bv8zNClgoFAqFQqFQKPwr7t7hPhIP2Q6nwM3CFn+59Ncsx2xEm09tkWY25gqwlrboCD2gtQPb0YFyME17ARHdM0VGUJMhRUTEVhsIuk43oZ4WqZv+ClXUr2NSeQa0zzJeBOn6YkAFGdPf3gVMsyGlkewg+GJaJATykmzPEj+hQvfLoVtDt5dV8Kil38hgyoQWolGXMI0fZYfGPVWkeCr0Bno3srynNyV8RH4rIWpKIjQRZIXukmHQP0sR5UjOi54Vus/HLaRT6bnQLfZXPi5RODhdX8DJCI2DUWZotg+mR7ZuZoXukDGy79WS/fa10F4idIcM0u0anrOhd2skrOyRHv9Z6HYnPF5JIyd8/0ToYVdfEnrTHbKbWmEYlwQZMaE7oGsk9Wb8eugNtAfXSaJURlQVaD0RmsYMaZMn4aJPzZYJrcrQM5Ew/iI0KCoJt0PUSvBaaJ5HRJNt+l7Ik8mkTeKjQYcewEVNug62PHs5NIyrSKy68Fzo4bE5csm+lbkynbDTPy/xF1hZ4cUyGRqU64yoeauXQ0NXIjtMISO0wDaN8ePkB/HQIkdfMN0eSarChibqlespejR7qA9DwxKRP0MyNIeIO/1cu9HnFcRViQ5NrWSDLoQOl2QVa23crA2NzHvp0KDskWBC875ei+iLKj1Pp0NDTXIhFdrClCHQoZnm64Cq51vJopjLhA7N+/jjiniEJDHdLLOh7j0+1O//oWhOhYbSCS+qbvRON0Db3+u3SvU6e9zNyHTbeHTvYULKwjHXwPJNMVAgpNS9BhcL1lOIdE3OifftWSbH7UWyo+dw5ghoM04UbneLbUs0jcThnK94plwLDY4iGEu4+w2eDaflmU8DXgAAAABJRU5ErkJggg=="},getters:{badges:function(t){return t.badges},cart:function(t){return t.cart},orders:function(t){return t.orders},users_list:function(t){return t.users_list.sort((function(t,e){return e.personal_points-t.personal_points}))},transactions:function(t){return t.transactions.sort((function(t,e){return t.created_at-e.created_at}))},transactions_from_me:function(t){return t.transactions.filter((function(t){return t.from_user===b.getters.get_id_from_token}))},transactions_to_me:function(t){return t.transactions.filter((function(t){return t.to_user===b.getters.get_id_from_token}))},categories:function(t){return t.categories},feedback_messages:function(t){return t.feedback_messages},products:function(t){return t.products},logged_user:function(t){return t.logged_user},token_a:function(t){return t.token_a},loggedIn:function(t){return"0"!==t.token_a},adminUser:function(t){return t.logged_user.is_staff},teamleadUser:function(t){return t.logged_user.is_teamlead},get_id_from_token:function(t){var e=t.token_a.split(".")[1],r=e.replace("-","+").replace("-","/");return JSON.parse(window.atob(r)).user_id}},mutations:{clear_cart:function(t){t.cart={products:[],numbers:[]},localStorage.removeItem("cart")},ten_points_update:function(t){t.users_list.forEach((function(t){return t.share_points=10}))},add_to_cart:function(t,e){var r=t.cart.products.findIndex((function(t){return t.id===e.id}));-1===r?(t.cart.products.push(e),t.cart.numbers.push(1)):t.cart.numbers.splice(r,1,t.cart.numbers[r]+=1),localStorage.setItem("cart",JSON.stringify(t.cart))},remove_from_cart:function(t,e){var r=t.cart.products.findIndex((function(t){return t.id===e.id}));1===t.cart.numbers[r]?(t.cart.products.splice(r,1),t.cart.numbers.splice(r,1)):t.cart.numbers.splice(r,1,t.cart.numbers[r]-=1),localStorage.setItem("cart",JSON.stringify(t.cart))},add_user:function(t,e){t.users_list.push(e)},add_cat:function(t,e){t.categories.push(e)},add_product:function(t,e){t.categories.push(e)},retrieveToken_r:function(t,e){t.token_r=e},retrieveToken_a:function(t,e){t.token_a=e},set_users_list:function(t,e){t.users_list=e},set_products:function(t,e){t.products=e},set_orders:function(t,e){t.orders=e},set_transactions:function(t,e){t.transactions=e},set_categories:function(t,e){e.forEach((function(t){return t.values=t.values.split(",")})),t.categories=e},set_feedback_messages:function(t,e){t.feedback_messages=e},set_logged_user_id:function(t,e){t.logged_user_id=e},set_logged_user:function(t,e){var r=e.findIndex((function(t){return t.id===b.getters.get_id_from_token}));t.logged_user=t.users_list[r]},edit_user:function(t,e){var r=t.users_list.findIndex((function(t){return t.id===e.id}));t.users_list.splice(r,1,e),t.logged_user=e},admin_edit_user:function(t,e){var r=t.users_list.findIndex((function(t){return t.id===e.id}));t.users_list.splice(r,1,e)},edit_product:function(t,e){var r=t.products.findIndex((function(t){return t.id===e.id}));t.products.splice(r,1,e)},change_order_status:function(t,e){var r=t.orders.findIndex((function(t){return t.id===e.id}));t.orders[r].delivered_at=e.delivered_at;var s=t.orders[r].active=e.active;t.products.splice(r,1,s)},restock_prod:function(t,e){var r=t.products.findIndex((function(t){return t.id===e.id}));t.products[r].in_stock=e.in_stock},from_to_user:function(t,e){var r=t.users_list.findIndex((function(t){return t.id===e.from_user})),s=t.users_list.findIndex((function(t){return t.id===e.to_user}));t.users_list[r].share_points=Number.parseInt(t.users_list[r].share_points)-e.amount,t.users_list[s].personal_points=Number.parseInt(t.users_list[s].personal_points)+e.amount},deleteuser:function(t,e){var r=t.users_list.findIndex((function(t){return t===e}));t.users_list.splice(r,1)},delete_product:function(t,e){var r=t.products.findIndex((function(t){return t===e}));t.products.splice(r,1)},destroyToken:function(t){t.token="0"}},actions:{add_to_cart:function(t,e){t.commit("add_to_cart",e)},remove_from_cart:function(t,e){t.commit("remove_from_cart",e)},refreshToken:function(t){return new Promise((function(e,r){g.post("auth/token/refresh/",{refresh:t.state.token_r}).then((function(r){var s=r.data.access,a=r.data.refresh,n=s.split(".")[1],i=n.replace("-","+").replace("-","/"),o=JSON.parse(window.atob(i)).user_id;t.commit("set_logged_user_id",o),localStorage.setItem("auth_token_access",s),localStorage.setItem("auth_token_refresh",a),t.commit("retrieveToken_r",a),t.commit("retrieveToken_a",s),e(r)})).catch((function(t){r(t)}))}))},destroyToken:function(t){t.commit("destroyToken"),window.location.reload(!0),localStorage.setItem("auth_token_refresh","0"),localStorage.setItem("auth_token_access","0"),localStorage.removeItem("c_user")},retrieveToken:function(t,e){return new Promise((function(r,s){g.post("auth/token/",{email:e.email,password:e.password}).then((function(e){var s=e.data.refresh,a=e.data.access,n=a.split(".")[1],i=n.replace("-","+").replace("-","/"),o=JSON.parse(window.atob(i)).user_id;t.commit("set_logged_user_id",o),localStorage.setItem("auth_token_refresh",s),localStorage.setItem("auth_token_access",a),t.commit("retrieveToken_r",s),t.commit("retrieveToken_a",a),r(e)})).catch((function(t){t.response.status>=400&&t.response.status<500?a["default"].prototype.$vToastify.error({title:"Ошибка доступа",body:"Проверьте правильность введённых данных",theme:"light"}):a["default"].prototype.$vToastify.error({title:"Что-то пошло не так...",body:t,theme:"light"}),s(t)}))}))},getallusers:function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return g.defaults.headers.common["Authorization"]="Bearer "+e.state.token_a,t.abrupt("return",new Promise((function(t,r){g.get("/users/").then((function(r){var s=Array.from(r.data),a=s.find((function(t){return t.id===b.getters.get_id_from_token}));localStorage.setItem("c_user",a.first_name+" "+a.last_name),e.commit("set_users_list",s),e.commit("set_logged_user",s),t(r)})).catch((function(t){console.log(t),t.response.status,console.log(t),r(t)}))})));case 2:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),get_transactions:function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return g.defaults.headers.common["Authorization"]="Bearer "+e.state.token_a,t.abrupt("return",new Promise((function(t,r){g.get("/transactions/").then((function(r){var s=Array.from(r.data);e.commit("set_transactions",s),t(r)})).catch((function(t){console.log(t),t.response.status,console.log(t),r(t)}))})));case 2:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),get_all_categories:function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return g.defaults.headers.common["Authorization"]="Bearer "+e.state.token_a,t.abrupt("return",new Promise((function(t,r){g.get("/categories/").then((function(r){var s=Array.from(r.data);e.commit("set_categories",s),t(r)})).catch((function(t){console.log(t),r(t)}))})));case 2:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),get_interests:function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(e,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return g.defaults.headers.common["Authorization"]="Bearer "+e.state.token_a,t.abrupt("return",new Promise((function(t,e){g.get("users/"+r+"/interests/").then((function(e){console.log(e),t(e)})).catch((function(t){console.log(t),e(t)}))})));case 2:case"end":return t.stop()}}),t)})));function e(e,r){return t.apply(this,arguments)}return e}(),sharepoints:function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return g.defaults.headers.common["Authorization"]="Bearer "+e.state.token_a,t.abrupt("return",new Promise((function(t,r){g.post("/sharepoints/").then((function(r){a["default"].prototype.$vToastify.success({title:"Баллы успешно зачислены",body:"Все пользователи получили 10Б спасибо",theme:"light"}),console.log(r),e.commit("ten_points_update"),t(r)})).catch((function(t){console.log(t),r(t)}))})));case 2:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),addpoints:function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(e,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return g.defaults.headers.common["Authorization"]="Bearer "+e.state.token_a,t.abrupt("return",new Promise((function(t,s){g.post("/transactions/",r).then((function(r){a["default"].prototype.$vToastify.success({title:"Баллы успешно переведены",body:"Перевели с Вашего счета "+r.data.amount+"Б",theme:"light"}),e.commit("from_to_user",r.data),t(r)})).catch((function(t){a["default"].prototype.$vToastify.error({title:"Что-то пошло не так...",body:t,theme:"light"}),console.log(t),s(t)}))})));case 2:case"end":return t.stop()}}),t)})));function e(e,r){return t.apply(this,arguments)}return e}(),add_super_transaction:function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(e,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return g.defaults.headers.common["Authorization"]="Bearer "+e.state.token_a,t.abrupt("return",new Promise((function(t,e){g.post("/supertransactions/",r).then((function(e){a["default"].prototype.$vToastify.success({title:"Баллы успешно зачислены",body:"Вы великолепны!"}),t(e)})).catch((function(t){console.log(JSON.stringify(t)),a["default"].prototype.$vToastify.error({title:"Что-то пошло не так...",body:t}),e(t)}))})));case 2:case"end":return t.stop()}}),t)})));function e(e,r){return t.apply(this,arguments)}return e}(),edit_user:function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(e,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return g.defaults.headers.common["Authorization"]="Bearer "+e.state.token_a,t.abrupt("return",new Promise((function(t,s){var n=b.getters.get_id_from_token;g.patch("/users/"+n+"/",r).then((function(r){a["default"].prototype.$vToastify.success({title:"Изменения сохранены",theme:"light"});var s=r.data;alert(JSON.stringify(s));var n=Object.assign(b.getters.logged_user,s);e.commit("edit_user",n),t(r)})).catch((function(t){a["default"].prototype.$vToastify.error({title:"Что-то пошло не так...",body:t,theme:"light"}),console.log(t),s(t)}))})));case 2:case"end":return t.stop()}}),t)})));function e(e,r){return t.apply(this,arguments)}return e}(),admin_edit_user:function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(e,r){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s={id:r.id,email:r.email,is_staff:r.is_staff,is_teamlead:r.is_teamlead},g.defaults.headers.common["Authorization"]="Bearer "+e.state.token_a,t.abrupt("return",new Promise((function(t,n){g.patch("/users/"+s.id+"/",s).then((function(s){a["default"].prototype.$vToastify.success({title:"Уровень доступа пользователя успешно изменен",theme:"light"}),e.commit("admin_edit_user",r),t(s)})).catch((function(t){a["default"].prototype.$vToastify.error({title:"Что-то пошло не так...",body:t,theme:"light"}),console.log(t),n(t)}))})));case 3:case"end":return t.stop()}}),t)})));function e(e,r){return t.apply(this,arguments)}return e}(),delete_user:function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(e,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return g.defaults.headers.common["Authorization"]="Bearer "+e.state.token_a,t.abrupt("return",new Promise((function(t,s){g.delete("/users/"+r.id+"/").then((function(s){a["default"].prototype.$vToastify.success({title:"Пользователь удален",body:"Оно и к лучшему",theme:"light"}),e.commit("delete_user",r),t(s)})).catch((function(t){a["default"].prototype.$vToastify.error({title:"Что-то пошло не так...",body:t,theme:"light"}),console.log(t),s(t)}))})));case 2:case"end":return t.stop()}}),t)})));function e(e,r){return t.apply(this,arguments)}return e}(),add_new_user:function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(e,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return g.defaults.headers.common["Authorization"]="Bearer "+e.state.token_a,t.abrupt("return",new Promise((function(t,s){g.post("/users/",r).then((function(s){a["default"].prototype.$vToastify.success({title:"Пользователь "+r.first_name+" "+r.last_name+" успешно добавлен в систему",theme:"light"});var n=s.data;e.commit("add_user",n),t(s)})).catch((function(t){a["default"].prototype.$vToastify.error({title:"Что-то пошло не так...",body:t,theme:"light"}),console.log(t),s(t)}))})));case 2:case"end":return t.stop()}}),t)})));function e(e,r){return t.apply(this,arguments)}return e}(),add_new_cat:function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(e,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return g.defaults.headers.common["Authorization"]="Bearer "+e.state.token_a,t.abrupt("return",new Promise((function(t,s){g.post("/categories/",r).then((function(s){a["default"].prototype.$vToastify.success({title:"Новая категория "+r.name+" добавлена",theme:"light"});var n=s.data;n.values=n.values.split(","),e.commit("add_cat",n),t(s)})).catch((function(t){a["default"].prototype.$vToastify.error({title:"Что-то пошло не так...",body:t,theme:"light"}),console.log(t),s(t)}))})));case 2:case"end":return t.stop()}}),t)})));function e(e,r){return t.apply(this,arguments)}return e}(),add_interest:function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(e,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return g.defaults.headers.common["Authorization"]="Bearer "+e.state.token_a,t.abrupt("return",new Promise((function(t,e){g.post("users/add_interest/",r).then((function(e){console.log(e),t(e)})).catch((function(t){a["default"].prototype.$vToastify.error({title:"Что-то пошло не так...",body:t,theme:"light"}),console.log(t),e(t)}))})));case 2:case"end":return t.stop()}}),t)})));function e(e,r){return t.apply(this,arguments)}return e}(),send_feedback:function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(e,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return g.defaults.headers.common["Authorization"]="Bearer "+e.state.token_a,t.abrupt("return",new Promise((function(t,e){g.post("/feedbackmessages/",r).then((function(e){a["default"].prototype.$vToastify.success({title:"Сообщение обрабатывается",body:"ожидайте уведомление на почту",theme:"light"}),t(e)})).catch((function(t){console.log(t),a["default"].prototype.$vToastify.error({title:"Что-то пошло не так...",body:t,theme:"light"}),e(t)}))})));case 2:case"end":return t.stop()}}),t)})));function e(e,r){return t.apply(this,arguments)}return e}(),get_feedback:function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return g.defaults.headers.common["Authorization"]="Bearer "+e.state.token_a,t.abrupt("return",new Promise((function(t,r){g.get("/feedbackmessages/").then((function(r){console.log(r.data);var s=r.data;e.commit("set_feedback_messages",s),t(r)})).catch((function(t){console.log(t),r(t)}))})));case 2:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),get_products:function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return g.defaults.headers.common["Authorization"]="Bearer "+e.state.token_a,t.abrupt("return",new Promise((function(t,r){g.get("/products/").then((function(r){console.log(r.data);var s=r.data;e.commit("set_products",s),t(r)})).catch((function(t){console.log(t),r(t)}))})));case 2:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),get_excel:function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(e,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return g.defaults.headers.common["Authorization"]="Bearer "+e.state.token,t.abrupt("return",new Promise((function(t,e){g.post("/excel/",r).then((function(e){a["default"].prototype.$vToastify.success({title:"Идёт сбор данных",body:"ожидайте уведомление на почту",theme:"light"}),t(e)})).catch((function(t){a["default"].prototype.$vToastify.error({title:"Что-то пошло не так...",body:"на почту ничего не пришлём :(",theme:"light"}),console.log(t),e(t)}))})));case 2:case"end":return t.stop()}}),t)})));function e(e,r){return t.apply(this,arguments)}return e}(),add_new_product:function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(e,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return g.defaults.headers.common["Authorization"]="Bearer "+e.state.token_a,t.abrupt("return",new Promise((function(t,e){g.post("/products/",r).then((function(e){a["default"].prototype.$vToastify.success({title:"Товар добален",body:"Посетите Murano Market",theme:"light"}),t(e)})).catch((function(t){console.log(t),a["default"].prototype.$vToastify.error({title:"Что-то пошло не так...",body:t,theme:"light"}),e(t)}))})));case 2:case"end":return t.stop()}}),t)})));function e(e,r){return t.apply(this,arguments)}return e}(),edit_product:function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(e,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return g.defaults.headers.common["Authorization"]="Bearer "+e.state.token_a,t.abrupt("return",new Promise((function(t,s){g.patch("/products/"+r.id+"/",r.data).then((function(r){a["default"].prototype.$vToastify.success({title:"Изменения сохранены",theme:"light"}),alert(r);var s=r.data;e.commit("edit_product",s),t(r)})).catch((function(t){a["default"].prototype.$vToastify.error({title:"Что-то пошло не так...",body:t,theme:"light"}),console.log(t),s(t)}))})));case 2:case"end":return t.stop()}}),t)})));function e(e,r){return t.apply(this,arguments)}return e}(),restock_product:function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(e,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return g.defaults.headers.common["Authorization"]="Bearer "+e.state.token_a,t.abrupt("return",new Promise((function(t,s){g.patch("/products/"+r.id+"/",r).then((function(s){var n="";n=r.in_stock?"Данный товар теперь доступен в маркете":"Данный товар теперь недоступен в маркете",a["default"].prototype.$vToastify.success({title:"OK",body:n,theme:"light"}),e.commit("restock_prod",r),t(s)})).catch((function(t){a["default"].prototype.$vToastify.error({title:"Что-то пошло не так... но вероятнее, проблема ток с респонсом",body:t,theme:"light"}),s(t)}))})));case 2:case"end":return t.stop()}}),t)})));function e(e,r){return t.apply(this,arguments)}return e}(),delete_product:function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(e,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return g.defaults.headers.common["Authorization"]="Bearer "+e.state.token_a,t.abrupt("return",new Promise((function(t,s){g.delete("/products/"+r.id+"/").then((function(s){a["default"].prototype.$vToastify.success({title:"Товар удален",theme:"light"}),e.commit("delete_prod",r),t(s)})).catch((function(t){console.log(t),a["default"].prototype.$vToastify.error({title:"Что-то пошло не так...",body:t,theme:"light"}),s(t)}))})));case 2:case"end":return t.stop()}}),t)})));function e(e,r){return t.apply(this,arguments)}return e}(),new_order:function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(e,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return g.defaults.headers.common["Authorization"]="Bearer "+e.state.token_a,t.abrupt("return",new Promise((function(t,s){g.post("/orders/",r).then((function(r){a["default"].prototype.$vToastify.success({title:"Ваш заказ успешно оформлен",body:"Администратор свяжется с Вами при необходимости уточнить данные или время доставки",theme:"light"}),e.commit("clear_cart"),t(r)})).catch((function(t){a["default"].prototype.$vToastify.error({title:"Что-то пошло не так...",body:t.response.data,theme:"light"}),s(t)}))})));case 2:case"end":return t.stop()}}),t)})));function e(e,r){return t.apply(this,arguments)}return e}(),get_orders:function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return g.defaults.headers.common["Authorization"]="Bearer "+e.state.token_a,t.abrupt("return",new Promise((function(t,r){g.get("/orders/").then((function(r){console.log(r.data);var s=r.data;e.commit("set_orders",s),t(r)})).catch((function(t){console.log(t),r(t)}))})));case 2:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),change_order_status:function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(e,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return g.defaults.headers.common["Authorization"]="Bearer "+e.state.token_a,t.abrupt("return",new Promise((function(t,s){g.patch("/orders/"+r.id+"/",r).then((function(r){a["default"].prototype.$vToastify.success({title:"Статус заказа изменен",theme:"light"});var s=r.data;e.commit("change_order_status",s),t(r)})).catch((function(t){a["default"].prototype.$vToastify.error({title:"Что-то пошло не так...",body:t,theme:"light"}),s(t)}))})));case 2:case"end":return t.stop()}}),t)})));function e(e,r){return t.apply(this,arguments)}return e}(),watermarker:function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(e,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return g.defaults.headers.common["Authorization"]="Token "+e.state.token,t.abrupt("return",new Promise((function(t,e){g.post("watermark/",r,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){console.log(e.data),t(e)})).catch((function(t){console.log(t),e(t)}))})));case 2:case"end":return t.stop()}}),t)})));function e(e,r){return t.apply(this,arguments)}return e}()}}),x=r("8c4f"),y=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-layout",{staticClass:"align-center",attrs:{column:""}},[r("div",{staticClass:"text-center ma-3"},[r("h1",[t._v("Обратная связь")]),r("div",{staticClass:"subtitle-1",staticStyle:{"max-width":"800px"}},[t._v(" Если у тебя возникли вопросы, пожелания или предложения по работе нашей системы, заполни форму ниже, и мы обязательно ответим тебе в бижайшее время ")])]),r("v-card",{staticClass:"ma-3",attrs:{flat:"",width:"600px",outlined:""}},[r("v-form",{ref:"form"},[r("v-card-text",[r("v-text-field",{attrs:{outlined:"",label:"Тема",required:""},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),r("v-textarea",{attrs:{outlined:"",rules:[function(t){return!!t||"Поле не может быть пустым"}],label:"Текст",hint:"Любые пожелания или замечания по работе сервиса",required:""},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1),r("v-card-actions",{staticClass:"justify-center"},[r("v-btn",{attrs:{color:"primary",loading:t.loading},on:{click:t.send_feedback}},[t._v(" Отправить ")])],1)],1)],1)],1)},k=[],w={name:"Feedback",data:function(){return{valid:!1,text:"",title:"",loading:!1}},methods:{send_feedback:function(){var t=this,e={topic:this.title,text:this.text};this.loading=!0,this.$store.dispatch("send_feedback",e).then((function(){t.loading=!1}))}}},C=w,A=Object(l["a"])(C,y,k,!1,null,"61a92434",null),R=A.exports,$=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-layout",{attrs:{row:"",wrap:"","align-content-center":""}},[s("v-flex",{attrs:{xs12:"",sm12:"",md6:""}},[s("v-card",{staticClass:"ma-3 ",attrs:{flat:""}},[s("v-tabs",{attrs:{centered:"","mobile-break-point":"300px"}},[s("v-tab",[s("v-icon",{attrs:{left:""}},[t._v("person")]),t._v(" Профиль ")],1),s("v-tab",{on:{click:t.interests}},[s("v-icon",{attrs:{left:""}},[t._v("book")]),t._v(" Бейджи ")],1),s("v-tab",[s("v-icon",{attrs:{left:""}},[t._v("edit")]),t._v(" Изменить ")],1),s("v-tab-item",[s("v-card",{attrs:{flat:""}},[s("v-layout",{attrs:{row:""}},[s("v-row",{staticClass:"ma-3",attrs:{justify:"center",sm6:""}},[s("v-avatar",{staticClass:"ma-3",attrs:{size:"150"}},[s("v-img",{attrs:{src:t.avatar}})],1)],1),s("v-flex",{attrs:{sm6:"","align-self-center":""}},[s("div",[s("div",{staticClass:"title black--text "},[t._v(t._s(t.user.first_name)+" "+t._s(t.user.last_name))]),s("div",{staticClass:"subtitle-2"},[t._v(t._s(t.user.position))]),s("div",{staticClass:"subtitle-2"},[t._v(t._s(t.user.email))]),s("v-btn",{attrs:{color:"primary","x-small":""},on:{click:function(e){t.uploader=!0}}},[t._v("загрузить изображение")]),s("my-upload",{attrs:{width:300,height:300,field:"img","lang-type":"ru"},on:{"crop-success":t.cropSuccess},model:{value:t.uploader,callback:function(e){t.uploader=e},expression:"uploader"}})],1)])],1),s("v-flex",[s("v-card-text",[s("div",{staticClass:"subtitle-2"},[t._v(" О себе: "),s("v-card-text",[t._v(" "+t._s(t.user.profile)+" ")])],1)])],1),s("v-layout",{staticClass:"text-center ma-3",attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs4:""}},[s("div",[t._v("Баллы Спасибо")]),s("v-progress-circular",{attrs:{rotate:-90,size:100,width:15,value:10*t.user.share_points,color:"primary"}},[t._v(" "+t._s(t.user.share_points+"/10")+" ")])],1),s("v-flex",{attrs:{xs4:""}},[s("div",[t._v(" Рейтинг ")]),s("v-icon",{attrs:{size:"80",color:"orange"}},[t._v("emoji_events")]),s("div",{staticClass:"subtitle-2 orange--text"},[t._v(" "+t._s(t.placelabel()))])],1),s("v-flex",{attrs:{xs4:""}},[s("div",[t._v(" Личные баллы ")]),s("v-col",{staticClass:"font-weight-black red--text display-3 mt-3",attrs:{"align-self":"center"}},[t._v(" "+t._s(t.user.personal_points))])],1)],1),s("v-divider"),s("v-btn",{attrs:{to:"rating",block:"",color:"primary"}},[t._v("Поделиться баллами спасибо")])],1)],1),s("v-tab-item",[s("v-card",{attrs:{flat:""}},[s("v-layout",{staticClass:"text-center ma-3",attrs:{row:"",wrap:""}},t._l(t.badges,(function(e){return s("v-flex",{key:e.badge,attrs:{xs3:""}},[s("v-icon",{staticClass:"ma-3",attrs:{color:t.getColor(e.badge),size:"50"},on:{click:function(r){return t.add_interest(e)}}},[t._v(t._s(e.badge))]),s("div",{staticClass:"text--darken-1 caption mb-6"},[t._v(" "+t._s(e.text))])],1)})),1)],1)],1),s("v-tab-item",[s("v-card",{attrs:{flat:""}},[s("v-card-text",[s("EditUser",{attrs:{user:t.user},on:{reload:t.reload}})],1)],1)],1)],1)],1)],1),s("v-flex",{attrs:{xs12:"",md6:""}},[s("v-card",{staticClass:"ma-3"},[s("v-toolbar",{attrs:{color:"purple",dark:""}},[s("v-icon",{staticClass:"mr-3"},[t._v("publish")]),s("v-toolbar-title",[t._v("Мои переводы")])],1),s("v-list",{staticClass:"overflow-y-auto",attrs:{"max-height":"300"}},t._l(t.transactions_from_me,(function(e){return s("v-list-item",{key:e.id},[s("v-list-item-avatar",[s("v-avatar",{staticClass:"grey lighten-5 ma-3 align-self-center"},[t.get_user_img(e.to_user)?s("v-img",{attrs:{src:t.get_user_img(e.to_user)}}):s("v-img",{attrs:{src:r("113c")}})],1)],1),s("v-list-item-content",[s("v-list-item-title",{domProps:{textContent:t._s(t.get_user_by_id(e.to_user))}})],1),s("v-list-item-content",[s("v-list-item-title",{domProps:{textContent:t._s(t.get_cat_by_id(e.category))}})],1),s("v-list-item-icon",[s("v-list-item-title",{staticClass:"red--text"},[t._v(" "+t._s(e.amount)+" ")])],1)],1)})),1)],1),s("v-card",{staticClass:"ma-3",attrs:{"max-height":"360"}},[s("v-toolbar",{attrs:{color:"purple",dark:""}},[s("v-icon",{staticClass:"mr-3"},[t._v("get_app")]),s("v-toolbar-title",[t._v("Мои зачисления")]),s("v-spacer")],1),s("v-list",{staticClass:"overflow-y-auto",attrs:{"max-height":"300"}},t._l(t.transactions_to_me,(function(e){return s("v-list-item",{key:e.id},[s("v-list-item-avatar",[s("v-avatar",{staticClass:"grey lighten-5 ma-3 align-self-center"},[t.get_user_img(e.from_user)?s("v-img",{attrs:{src:t.get_user_img(e.from_user)}}):s("v-img",{attrs:{src:r("113c")}})],1)],1),s("v-list-item-content",[s("v-list-item-title",{domProps:{textContent:t._s(t.get_user_by_id(e.from_user))}})],1),s("v-list-item-content",[s("v-list-item-title",{domProps:{textContent:t._s(t.get_cat_by_id(e.category))}})],1),s("v-list-item-icon",[s("v-list-item-title",{staticClass:"green--text"},[t._v("+ "+t._s(e.amount)+" ")])],1)],1)})),1)],1)],1)],1)},O=[],S=(r("caad"),r("2532"),r("0b4d")),I=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-form",{on:{submit:t.edit_user},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[r("v-col",{attrs:{cols:"12"}},[r("v-row",[r("v-col",{attrs:{cols:"6"}},[r("v-text-field",{attrs:{color:"indigo",label:"Имя",required:""},model:{value:t.first_name,callback:function(e){t.first_name=e},expression:"first_name"}})],1),r("v-col",{attrs:{cols:"6"}},[r("v-text-field",{attrs:{color:"indigo",label:"Фамилия",required:""},model:{value:t.last_name,callback:function(e){t.last_name=e},expression:"last_name"}})],1)],1)],1),r("v-col",[r("v-row",[r("v-col",{attrs:{cols:"6"}},[r("v-text-field",{attrs:{id:"email",color:"indigo",rules:t.emailRules,label:"Email",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),r("v-col",{attrs:{cols:"6"}},[r("v-text-field",{attrs:{color:"indigo",label:"Должность",required:""},model:{value:t.position,callback:function(e){t.position=e},expression:"position"}})],1)],1)],1),r("v-col",[r("v-row",[r("v-col",{attrs:{cols:"6"}},[r("v-text-field",{attrs:{id:"password1","append-icon":t.showpas?"md-eye":"mdi-eye-off",type:t.showpas?"text":"password",hint:"от 8 символов",counter:"",color:"indigo",rules:[t.PasswordRules.required,t.PasswordRules.min],label:"Новый пароль",required:""},model:{value:t.password1,callback:function(e){t.password1=e},expression:"password1"}}),r("v-text-field",{attrs:{id:"password2","append-icon":t.showpas?"eye":"eye-off",type:t.showpas?"text":"password",hint:"от 8 символов",counter:"",color:"indigo",label:"Повторите пароль",required:""},model:{value:t.password2,callback:function(e){t.password2=e},expression:"password2"}})],1),r("v-col",{attrs:{cols:"6"}},[r("v-textarea",{attrs:{rows:"3",color:"indigo",label:"О себе",required:""},model:{value:t.profile,callback:function(e){t.profile=e},expression:"profile"}})],1)],1)],1),r("p",{staticClass:"mb-0"},[r("v-btn",{staticClass:"ma-2",attrs:{outlined:"",color:"indigo",type:"submit"}},[t._v("Изменить")])],1)],1)},j=[],E={name:"EditUser",props:{user:Object},data:function(){return{valid:!1,showpas:!1,profile:"",first_name:"",position:"",last_name:"",email:"",password1:"",password2:"",Rules:[function(t){return!!t||"Field is required"}],PasswordRules:{required:function(t){return!!t||"введите пароль"},min:function(t){return t.length>=8||"пароль менее 8 символов"}},emailRules:[function(t){return!!t||"введите email "},function(t){return/.+@.+\..+/.test(t)||"каво... непонял"}]}},created:function(){this.position=this.user.position||"",this.last_name=this.user.last_name||"",this.first_name=this.user.first_name||"",this.email=this.user.email||"",this.profile=this.user.profile||""},methods:{edit_user:function(){var t={last_name:this.last_name,first_name:this.first_name,position:this.position,email:this.email,profile:this.profile};""!==this.password2&&(t.password=this.password2),this.$store.dispatch("edit_user",t).then(this.$emit("reload"))}}},P=E,T=Object(l["a"])(P,I,j,!1,null,"1569dd5e",null),U=T.exports,q={name:"Main",components:{EditUser:U,myUpload:S["a"]},data:function(){return{dialog:!1,uploader:!1,interest_list:""}},beforeCreate:function(){this.$store.dispatch("getallusers"),this.$store.dispatch("get_all_categories"),this.$store.dispatch("get_transactions")},computed:{badges:function(){return this.$store.getters.badges},users_list:function(){return this.$store.getters.users_list},categories:function(){return this.$store.getters.categories},user:function(){return this.$store.getters.logged_user},transactions_from_me:function(){return this.$store.getters.transactions_from_me},transactions_to_me:function(){return this.$store.getters.transactions_to_me},avatar:function(){return this.user.image?this.user.image:r("113c")}},methods:{cropSuccess:function(t,e){var r=this;function s(t,e,r){return fetch(t).then((function(t){return t.arrayBuffer()})).then((function(t){return new File([t],e,{type:r})}))}console.log("-------- crop success --------"),console.log(e),console.log(t),s(t,this.user.id+".png","image/png").then((function(t){var e=new FormData;e.append("image",t),r.$store.dispatch("edit_user",e),console.log(t)}))},refresh:function(){this.$store.dispatch("refreshToken").then((function(t){console.log(t)}))},get_user_by_id:function(t){var e=this.users_list.find((function(e){return e.id===t}));return e.first_name+" "+e.last_name},get_user_img:function(t){var e=this.users_list.find((function(e){return e.id===t}));return e.image},get_cat_by_id:function(t){var e=this.categories.find((function(e){return e.id===t}));return e.name},reload:function(){console.log("1")},interests:function(){var t=this;this.$store.dispatch("get_interests",this.$store.getters.logged_user.id).then((function(e){t.interest_list=e.data}))},placelabel:function(){var t=this,e=this.$store.getters.users_list.length,r=this.$store.getters.users_list.findIndex((function(e){return t.user.id===e.id}))+1;return r+"/"+e},add_interest:function(t){var e=this;this.$store.dispatch("add_interest",t).then((function(r){if("excluded"===r.data){var s=e.interest_list.findIndex((function(e){return e===t.badge}));e.interest_list.splice(s,1)}else e.interest_list.push(t.badge)}))},getColor:function(t){return this.interest_list.includes(t)?"primary":"grey darken-1"}}},M=q,N=(r("8cfa"),Object(l["a"])(M,$,O,!1,null,"2e554092",null)),z=N.exports,D=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-layout",{attrs:{column:""}},[r("v-layout",{attrs:{column:""}},[r("div",{staticClass:"text-center ma-3"},[r("h1",[t._v("Murano Marketplace")]),r("span",{staticClass:"subtitle-1",staticStyle:{"max-width":"800px"}},[t._v(" Первая партия айтемов уже готова к отгрузке на ваши столы! ")])])]),r("v-layout",{attrs:{"justify-space-between":"",flat:"",color:"transparent"}},[r("v-flex",{attrs:{lg3:"",md4:"",sm4:""}},[r("v-text-field",{staticClass:"ma-3",attrs:{outlined:"","append-icon":"search",label:"Поиск","single-line":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),r("v-flex",{attrs:{lg3:"",md4:"",sm4:""}},[r("v-col",[r("v-select",{attrs:{items:t.filters,label:"Фильтры",outlined:""},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})],1)],1)],1),r("v-layout",{attrs:{row:"",wrap:""}},t._l(t.searching(),(function(e){return r("v-flex",{key:e.id,attrs:{xs12:"",sm6:"",md4:"",lg3:""}},[r("v-hover",{staticClass:"ma-3 text-center",scopedSlots:t._u([{key:"default",fn:function(s){var a=s.hover;return[r("v-card",{class:{"on-hover":a},attrs:{flat:"",link:"",to:"shop/"+e.id}},[r("v-responsive",{staticClass:"ma-4"},[r("v-avatar",{attrs:{size:"200",tile:""}},[r("img",{attrs:{src:e.image}})])],1),r("v-card-text",[r("div",{staticClass:"subheading"},[t._v(t._s(e.name)+" ")]),r("div",{staticClass:"grey--text"},[t._v(t._s(e.price)+" Б")])])],1)]}}],null,!0)})],1)})),1)],1)},K=[],B=(r("c975"),r("466d"),r("841c"),{name:"Shop",beforeRouteLeave:function(t,e,r){var s=t.path.match("/shop/");null===s&&(localStorage.removeItem("search"),localStorage.removeItem("filter")),r()},beforeCreate:function(){this.$store.dispatch("get_products")},data:function(){return{search:localStorage.getItem("search")||"",filter:localStorage.getItem("filter")||"",filters:["Цена. По убыванию","Цена. По возрастанию"]}},computed:{products:function(){return this.$store.getters.products}},watch:{filter:function(){var t=this,e=this.filters.findIndex((function(e){return e===t.filter}));switch(e){case 0:this.products.sort((function(t,e){return e.price-t.price}));break;case 1:this.products.sort((function(t,e){return t.price-e.price}))}localStorage.setItem("filter",this.filter)}},methods:{searching:function(){if(!this.search)return this.products;var t=this.search.toLowerCase();return localStorage.setItem("search",this.search),this.products.filter((function(e){var r=e.name.toLowerCase();return r.indexOf(t)>-1}))}}}),Q=B,V=(r("4720"),Object(l["a"])(Q,D,K,!1,null,"122117a2",null)),X=V.exports,W=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",{attrs:{id:"inspire"}},[r("v-content",[r("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[r("v-row",{attrs:{align:"center",justify:"center"}},[r("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[r("v-card",{staticClass:"elevation-12"},[r("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[r("v-toolbar-title",[t._v("Login form")]),r("v-spacer")],1),r("v-card-text",[r("v-form",[r("v-text-field",{attrs:{label:"Email",name:"Email","prepend-icon":"person",type:"text"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),r("v-text-field",{attrs:{id:"password",label:"Password",name:"password","prepend-icon":"lock",type:"password"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login(e)}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"primary"},on:{click:t.login}},[t._v("Login")])],1)],1)],1)],1)],1)],1)],1)},F=[],G={props:{source:String},data:function(){return{email:"",password:""}},methods:{login:function(){var t=this;this.$store.dispatch("retrieveToken",{email:this.email,password:this.password}).then((function(e){"OK"==e.statusText&&t.$router.push("/")}))}}},H=G,L=Object(l["a"])(H,W,F,!1,null,"1249f8b6",null),J=L.exports,Y=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-layout",[r("v-card",{attrs:{width:"100%"}},[r("v-card-title",[t._v(" История операций "),r("v-spacer"),r("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),r("v-data-table",{attrs:{headers:t.headers,items:t.transactions,search:t.search,"disable-pagination":"","hide-default-footer":""},scopedSlots:t._u([{key:"item.from_user",fn:function(e){var r=e.item;return[t._v(" "+t._s(t.get_user_by_id(r.from_user))+" ")]}},{key:"item.to_user",fn:function(e){var r=e.item;return[t._v(" "+t._s(t.get_user_by_id(r.to_user))+" ")]}},{key:"item.category",fn:function(e){var r=e.item;return[t._v(" "+t._s(t.get_cat_by_id(r.category))+" ")]}},{key:"item.created_at",fn:function(e){var r=e.item;return[t._v(" "+t._s(t.dateformat(r.created_at))+" ")]}}])})],1)],1)},Z=[],tt={name:"Transactions",data:function(){return{loaded:!1,search:"",headers:[{text:"Отправитель",value:"from_user"},{text:"Получатель",value:"to_user"},{text:"Количество",value:"amount"},{text:"Категория",value:"category"},{text:"Комментарий",value:"comment"},{text:"Время",value:"created_at"}]}},computed:{transactions:function(){return this.$store.getters.transactions},users_list:function(){return this.$store.getters.users_list},categories:function(){return this.$store.getters.categories}},beforeCreate:function(){this.$store.dispatch("getallusers"),this.$store.dispatch("get_all_categories"),this.$store.dispatch("get_transactions")},methods:{get_user_by_id:function(t){var e=this.users_list.find((function(e){return e.id===t}));return e.first_name+" "+e.last_name},get_cat_by_id:function(t){var e=this.categories.find((function(e){return e.id===t}));return e.name},dateformat:function(t){var e=new Date(t),r=e.toDateString()+" "+e.getHours()+":"+e.getMinutes();return r}}},et=tt,rt=Object(l["a"])(et,Y,Z,!1,null,"02849e37",null),st=rt.exports,at=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-layout",{attrs:{column:""}},[r("v-layout",{attrs:{column:""}},[r("div",{staticClass:"text-center ma-3"},[r("h1",[t._v("Рейтинг")]),r("span",{staticClass:"subtitle-1",staticStyle:{"max-width":"800px"}},[t._v(" Поделись баллами спасибо с коллегами по отделу и помоги им добраться до верхушки таблицы ")])])]),r("v-layout",{attrs:{"justify-space-between":"",flat:"",color:"transparent"}},[r("v-card",{attrs:{width:"100%",flat:""}},[r("v-flex",{attrs:{lg3:"",md4:"",sm4:""}},[r("v-text-field",{staticClass:"ma-3",attrs:{"append-icon":"search",label:"Поиск","single-line":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),r("v-data-table",{attrs:{headers:t.headers,items:t.users_list,search:t.search,"disable-pagination":"","hide-default-footer":""},scopedSlots:t._u([{key:"item.place",fn:function(e){var r=e.item;return[t._v(" "+t._s(t.users_list.map((function(t){return t.id})).indexOf(r.id)+1)+" ")]}},{key:"item.add_button",fn:function(e){var s=e.item;return[r("SharePointsDialog",{attrs:{item:s},on:{addpoints:t.addpoints}})]}}])})],1)],1)],1)},nt=[],it=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-dialog",{attrs:{width:"600"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[t.item.id!==t.user.id?r("v-btn",t._g({staticClass:"ml-1",attrs:{color:"indigo",dark:""}},s),[t._v("Спасибо")]):t._e()]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[r("v-card",[r("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[t._v(" Поделиться баллами спасибо ")]),r("v-card-text",[r("v-layout",{staticClass:"flex-nowrap",attrs:{"justify-center":"",row:""}},[r("v-flex",{attrs:{sm6:""}},[r("UserCard",{attrs:{user:t.user}})],1),r("div",{staticStyle:{"align-self":"center"}},[r("h1",{staticStyle:{"text-align":"center"}},[t._v(t._s(t.value))]),r("v-icon",{attrs:{color:"black",size:"50px"}},[t._v("arrow_forward")])],1),r("v-flex",{attrs:{sm6:""}},[r("UserCard",{attrs:{user:t.item}})],1)],1),r("v-spacer"),r("v-slider",{directives:[{name:"show",rawName:"v-show",value:t.user.share_points>1,expression:"user.share_points>1"}],attrs:{label:"Количество",step:"1",ticks:"",max:t.user.share_points,min:"1"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),Number.parseInt(t.user.share_points)>0?r("v-text-field",{attrs:{type:"text",color:"indigo",label:"Комментарий"},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}}):r("span",[t._v("Недостаточно средств")])],1),r("v-divider"),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"secondary",left:""},nativeOn:{click:function(e){t.dialog=!1}}},[t._v(" Назад ")]),Number.parseInt(t.user.share_points)>0?r("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(e){return t.sendpoints(e)}}},[t._v(" Спасибо ")]):t._e()],1)],1)],1)},ot=[],ct=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-card",{staticClass:"text-center ma-3"},[s("v-responsive",{staticClass:"pt-4 ma-3"},[s("v-avatar",{staticClass:"grey lighten-5",attrs:{"max-width":"150","max-height":"150"}},[t.user.image?s("v-img",{attrs:{src:t.user.image}}):s("v-img",{attrs:{src:r("113c")}})],1)],1),s("v-card-text",[s("div",{staticClass:"subheading"},[t._v(t._s(t.user.first_name)+" "+t._s(t.user.last_name))]),s("div",{staticClass:"grey--text"},[t._v(t._s(t.user.position))])])],1)},lt=[],ut={name:"UserCard",props:{user:Object}},dt=ut,mt=Object(l["a"])(dt,ct,lt,!1,null,"0528a43a",null),ft=mt.exports,vt={name:"SharePointsDialog",components:{UserCard:ft},props:{item:Object},data:function(){return{dialog:!1,value:1,comment:""}},computed:{user:function(){return this.$store.getters.logged_user},users_list:function(){return this.$store.getters.users_list}},methods:{sendpoints:function(){this.$store.dispatch("addpoints",{to_user:this.item.id,amount:this.value,comment:this.comment}),this.dialog=!1,this.comment="",this.value=1}}},pt=vt,_t=Object(l["a"])(pt,it,ot,!1,null,"51b6a5c2",null),ht=_t.exports,gt={name:"Rating",components:{SharePointsDialog:ht},data:function(){return{editedIndex:-1,editedItem:{},dialog:!1,search:"",headers:[{text:"#",value:"place",sortable:!1},{text:"Имя",value:"first_name",sortable:!1},{text:"Фамилия",value:"last_name",sortable:!1},{text:"Баллы спасибо",value:"share_points"},{text:"Копилка",value:"personal_points"},{text:"",value:"add_button",sortable:!1,align:"center"}]}},computed:{users_list:function(){return this.$store.getters.users_list}},beforeCreate:function(){this.$store.dispatch("getallusers")},methods:{editItem:function(t){this.editedIndex=this.users_list.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},addpoints:function(t){this.$store.dispatch("addpoints",t)}}},bt=gt,xt=Object(l["a"])(bt,at,nt,!1,null,"b7903fb2",null),yt=xt.exports,kt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-layout",{attrs:{column:""}},[s("v-layout",{attrs:{column:""}},[s("div",{staticClass:"text-center ma-3"},[s("h1",[t._v("Коллеги")]),s("span",{staticClass:"subtitle-1",staticStyle:{"max-width":"800px"}},[t._v(" Героев нужно знать в лицо! ")])])]),s("v-layout",{attrs:{row:"",wrap:""}},t._l(t.colleagues(),(function(e){return s("v-flex",{key:e.id,attrs:{xs12:"",sm6:"",md4:"",lg3:""}},[s("v-card",{staticClass:"text-center ma-3",on:{click:function(r){return t.pusher(e)}}},[s("v-responsive",{staticClass:"pt-4"},[e.is_staff||e.is_teamlead?s("v-badge",{attrs:{avatar:"",bordered:"",overlap:"",icon:t.getIcon(e)}},[s("v-avatar",{staticClass:"grey lighten-5 ma-3 align-self-center",attrs:{size:"150"}},[e.image?s("v-img",{attrs:{src:e.image}}):s("v-img",{attrs:{src:r("113c")}})],1)],1):s("v-avatar",{staticClass:"grey lighten-5 ma-3 align-self-center",attrs:{size:"150"}},[e.image?s("v-img",{attrs:{src:e.image}}):s("v-img",{attrs:{src:r("113c")}})],1)],1),s("v-card-text",[s("div",{staticClass:"subheading"},[t._v(t._s(e.first_name)+" "+t._s(e.last_name))]),s("div",{staticClass:"grey--text"},[t._v(t._s(e.position))])]),s("v-card-actions",{staticClass:"ma-auto justify-center"},[s("SharePointsDialog",{attrs:{item:e}})],1)],1)],1)})),1)],1)},wt=[],Ct={name:"Users",components:{SharePointsDialog:ht},data:function(){return{}},beforeCreate:function(){this.$store.dispatch("getallusers")},computed:{users_list:function(){return this.$store.getters.users_list},user:function(){return this.$store.getters.logged_user}},methods:{colleagues:function(){var t=this;return this.users_list.filter((function(e){return e!==t.user}))},getIcon:function(t){return t.is_staff?"build":t.is_teamlead?"grade":""},pusher:function(t){this.$router.push("users/"+t.id)}}},At=Ct,Rt=Object(l["a"])(At,kt,wt,!1,null,"76db6f90",null),$t=Rt.exports,Ot=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("router-view")},St=[],It={name:"Special",data:function(){return{sections:[{id:1,icon:"person",name:"Пользователи",color:"red",path:"usermanagement"},{id:2,icon:"book",name:"Маркетплейс",color:"purple",path:"usermanagement"},{id:3,icon:"add",name:"Заказы",color:"orange"},{id:4,icon:"mail",name:"Почта",color:"green",path:"inbox"},{id:5,icon:"book",name:"Категории",color:"blue"}]}}},jt=It,Et=Object(l["a"])(jt,Ot,St,!1,null,null,null),Pt=Et.exports,Tt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-layout",[r("div",{staticStyle:{width:"100%"}},[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.users_list,"sort-by":"calories"},scopedSlots:t._u([{key:"top",fn:function(){return[r("v-toolbar",{attrs:{flat:"",color:"white"}},[r("v-toolbar-title",[t._v("Пользователи")]),r("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),r("v-spacer"),r("v-btn",{staticClass:"mr-3",attrs:{color:"purple",fab:"",small:"",dark:""},on:{click:t.month_upd}},[r("v-icon",[t._v("update")])],1),r("ExcelData"),r("NewUser")],1)]},proxy:!0},{key:"item.action",fn:function(e){var s=e.item;return[r("v-icon",{staticClass:"mr-2",attrs:{color:t.getColor(s.is_staff)},on:{click:function(e){return t.change_is_staff(s)}}},[t._v(" build ")]),r("v-icon",{staticClass:"mr-2",attrs:{color:t.getColor(s.is_teamlead)},on:{click:function(e){return t.change_is_teamlead(s)}}},[t._v(" grade ")]),r("v-icon",{on:{click:function(e){return t.deleteItem(s)}}},[t._v(" delete ")])]}}])})],1)])},Ut=[],qt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[r("v-btn",t._g({attrs:{color:"primary",fab:"",small:"",dark:""}},s),[r("v-icon",[t._v("add")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[r("v-card",[r("v-form",{on:{submit:t.add_user},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[r("v-toolbar",{attrs:{flat:"",color:"indigo",dark:""}},[r("v-toolbar-title",[t._v("Новый Пользователь")]),r("v-spacer"),r("v-btn",{staticClass:"ma-3",attrs:{rounded:"",color:"indigo"},on:{click:t.field_generator}},[t._v("Авто")])],1),r("v-container",[r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{id:"email",color:"indigo",rules:t.emailRules,label:"Email",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{id:"password","append-icon":t.showpas?"md-eye":"mdi-eye-off",type:t.showpas?"text":"password",hint:"вводи",counter:"",color:"indigo",rules:[t.PasswordRules.required,t.PasswordRules.min],label:"Пароль для входа",required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),r("v-col",{attrs:{cols:"12"}},[r("v-row",[r("v-col",{attrs:{cols:"6"}},[r("v-text-field",{attrs:{color:"indigo",label:"Имя",required:""},model:{value:t.first_name,callback:function(e){t.first_name=e},expression:"first_name"}})],1),r("v-col",{attrs:{cols:"6"}},[r("v-text-field",{attrs:{color:"indigo",label:"Фамилия",required:""},model:{value:t.last_name,callback:function(e){t.last_name=e},expression:"last_name"}})],1)],1)],1),r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{color:"indigo",label:"Должность",required:""},model:{value:t.position,callback:function(e){t.position=e},expression:"position"}})],1),r("v-col",[r("v-row",[r("v-col",[r("v-checkbox",{attrs:{label:"Администратор"},model:{value:t.is_staff,callback:function(e){t.is_staff=e},expression:"is_staff"}})],1),r("v-col",[r("v-checkbox",{attrs:{label:"Тимлидер"},model:{value:t.is_teamlead,callback:function(e){t.is_teamlead=e},expression:"is_teamlead"}})],1)],1)],1),r("v-btn",{staticClass:"ma-2",attrs:{outlined:"",color:"indigo",type:"submit"}},[t._v("Добавить пользователя")]),r("v-btn",{staticClass:"ma-2",attrs:{outlined:"",color:"indigo"},on:{click:function(e){t.dialog=!1}}},[t._v("Вернуться")])],1)],1)],1)],1)},Mt=[],Nt={name:"NewUser",data:function(){return{dialog:!1,valid:!1,showpas:!1,is_staff:!1,is_teamlead:!1,first_name:null,position:"",last_name:null,email:"",password:null,Rules:[function(t){return!!t||"Field is required"}],PasswordRules:{required:function(t){return!!t||"введите пароль"},min:function(t){return t.length>=8||"пароль менее 8 символов"}},emailRules:[function(t){return!!t||"введите email "},function(t){return/.+@.+\..+/.test(t)||"каво... непонял"}],last_name_pool:["Бизон","Волк","Орангутан","Лемур","Макак","Ястреб","Кот","Медведь","Тюлень","Морж","Жук","Кузнечик","Вомбат","Козлик","Лев","Чижик","Енот","Верблюд","Змей","Муравьед"],first_name_pool:["Великий","Маленький","Могучий","Хитрый","Умный","Смышленый","Торопливый","Игривый","Незабываемый","Сильный","Компанейский","Скромный","Уверенный","Влюбленный","Весёлый","Бесстрашный","Добрый","Милый","Нежный","Ласковый"],position_name_pool:["Расхититель грабниц","Повелитель молний","Главный по тарелочкам","Босс качалки","Спасатель Малибу","Гроза морей","Секретный ингредиент","Агент 007","Укратитель тигров","Непризнанный гений","Секретный шпион","Приведение с мотором"]}},methods:{add_user:function(){var t={email:this.email,password:this.password,first_name:this.first_name,last_name:this.last_name,position:this.position,is_staff:this.is_staff,is_teamlead:this.is_teamlead};this.first_name=null,this.last_name=null,this.position=null,this.email=null,this.password=null,this.is_staff=!1,this.is_teamlead=!1,this.$store.dispatch("add_new_user",t),this.dialog=!1},field_generator:function(){this.first_name=this.first_name_pool[this.first_name_pool.length*Math.random()<<0],this.last_name=this.last_name_pool[this.last_name_pool.length*Math.random()<<0],this.position=this.position_name_pool[this.position_name_pool.length*Math.random()<<0]}}},zt=Nt,Dt=Object(l["a"])(zt,qt,Mt,!1,null,null,null),Kt=Dt.exports,Bt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[r("v-btn",t._g({staticClass:"mr-3",attrs:{color:"green",fab:"",small:"",dark:""}},s),[r("v-icon",[t._v("table_chart")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[r("v-card",[r("v-form",{on:{submit:t.get_excel}},[r("v-toolbar",{attrs:{flat:"",color:"green",dark:""}},[r("v-toolbar-title",[t._v("Получить XLS на почту")])],1),r("v-list",[r("v-list-item",[r("v-list-item-content",[r("span",[t._v("Пользователи")])]),r("v-checkbox",{attrs:{color:"green",value:"Users"},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1),r("v-list-item",[r("v-list-item-content",[r("span",[t._v("Транзакции")])]),r("v-checkbox",{attrs:{color:"green",value:"Transactions"},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)],1),r("v-btn",{staticClass:"ma-2",attrs:{disabled:0===t.selected.length,outlined:"",color:"green",type:"submit"}},[t._v("получить на email")]),r("v-btn",{staticClass:"ma-2",attrs:{outlined:"",color:"green"},on:{click:function(e){t.dialog=!1}}},[t._v("Вернуться")])],1)],1)],1)},Qt=[],Vt={name:"ExcelData",data:function(){return{dialog:!1,selected:[]}},methods:{get_excel:function(){var t={selected:this.selected};this.$store.dispatch("get_excel",t),this.dialog=!1}}},Xt=Vt,Wt=Object(l["a"])(Xt,Bt,Qt,!1,null,"2eb4f3af",null),Ft=Wt.exports,Gt={name:"UserManagement",components:{ExcelData:Ft,NewUser:Kt},data:function(){return{dialog:!1,headers:[{text:"Имя",value:"first_name"},{text:"Фамилия",value:"last_name"},{text:"Баллы спасибо",value:"share_points"},{text:"Копилка",value:"personal_points"},{text:"Действия",value:"action",sortable:!1}]}},computed:{users_list:function(){return this.$store.getters.users_list},categories:function(){return this.$store.getters.categories},user:function(){return this.$store.getters.logged_user}},methods:{change_is_staff:function(t){var e=this;this.$vToastify.prompt({body:"Вы уверены, что хотите изменить статус администратора"+t.first_name+" "+t.last_name+"?",answers:{"Да":!0,"Нет":!1},theme:"light"}).then((function(r){r&&(t.is_staff=!t.is_staff,e.$store.dispatch("admin_edit_user",t))}))},change_is_teamlead:function(t){var e=this;this.$vToastify.prompt({body:"Вы уверены, что хотите изменить статус тимлидера "+t.first_name+" "+t.last_name+"?",answers:{"Да":!0,"Нет":!1},theme:"light"}).then((function(r){r&&(t.is_teamlead=!t.is_teamlead,e.$store.dispatch("admin_edit_user",t))}))},getColor:function(t){return t?"primary":"secondary"},deleteItem:function(t){var e=this;this.$vToastify.prompt({body:"Вы уверены, что хотите удалить "+t.first_name+" "+t.last_name+"?",answers:{"Да":!0,"Нет":!1},theme:"light"}).then((function(r){r&&e.$store.dispatch("delete_user",t)}))},month_upd:function(){var t=this;this.$vToastify.prompt({body:"Вы уверены, что хотите обновить баллы спасибо?",answers:{"Да":!0,"Нет":!1},theme:"light"}).then((function(e){e&&t.$store.dispatch("sharepoints")}))}}},Ht=Gt,Lt=Object(l["a"])(Ht,Tt,Ut,!1,null,null,null),Jt=Lt.exports,Yt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-layout",{attrs:{row:"",wrap:""}},t._l(t.sections,(function(e){return r("v-flex",{key:e.id,attrs:{xs12:"",sm6:"",md4:"",lg4:""}},[r("v-card",{staticClass:"d-flex justify-center  ma-3 ",attrs:{color:e.color,disabled:t.$store.getters.logged_user.is_teamlead&&!t.$store.getters.logged_user.is_staff&&e.staffOnly,dark:"",height:"250",hover:"",link:"",to:"/special/"+e.path}},[r("div",{staticClass:"align-self-center d-flex "},[r("v-icon",[t._v(t._s(e.icon))]),r("div",[t._v(t._s(e.name))])],1)])],1)})),1)},Zt=[],te={name:"SpecialMenu",data:function(){return{sections:[{id:1,icon:"person",name:"Пользователи",color:"red",path:"usermanagement",staffOnly:!0},{id:2,icon:"storefront",name:"Маркетплейс",color:"purple",path:"marketmanagement",staffOnly:!0},{id:3,icon:"add",name:"Заказы",color:"orange",path:"orders",staffOnly:!0},{id:4,icon:"mail",name:"Почта",color:"green",path:"inbox",staffOnly:!0}]}}},ee=te,re=Object(l["a"])(ee,Yt,Zt,!1,null,null,null),se=re.exports,ae=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticStyle:{width:"100%"}},[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.products,"sort-by":"price"},scopedSlots:t._u([{key:"top",fn:function(){return[r("v-toolbar",{attrs:{flat:"",color:"white"}},[r("v-toolbar-title",[t._v("Товары ")]),r("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),r("v-spacer"),r("NewProduct")],1)]},proxy:!0},{key:"item.image",fn:function(t){var e=t.item;return[r("v-avatar",{staticClass:"ma-1",attrs:{size:"100",tile:""}},[r("img",{attrs:{alt:"reload",src:e.image}})])]}},{key:"item.in_stock",fn:function(e){var s=e.item;return[r("v-switch",{attrs:{value:s.id},on:{change:function(e){return t.restock(s)}},model:{value:t.in_stock_items,callback:function(e){t.in_stock_items=e},expression:"in_stock_items"}})]}},{key:"item.action",fn:function(e){var s=e.item;return[r("EditProduct",{attrs:{product:s}}),r("v-icon",{on:{click:function(e){return t.delete_product(s)}}},[t._v(" delete ")])]}}])})],1)},ne=[],ie=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[r("v-btn",t._g({staticClass:"mb-0",attrs:{color:"primary",fab:"",small:"",elevation:"1",dark:""}},s),[r("v-icon",[t._v("add")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[r("v-card",[r("v-form",{on:{submit:t.add_new_product}},[r("v-toolbar",{attrs:{flat:"",color:"indigo",dark:""}},[r("v-toolbar-title",[t._v("Новый товар")])],1),r("v-container",[r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{color:"indigo",rules:t.Rules,label:"Наименование",required:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),r("v-col",{attrs:{cols:"12"}},[r("v-textarea",{attrs:{color:"indigo",rules:t.Rules,label:"Описание",required:""},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1),r("v-col",{attrs:{cols:"12"}},[r("v-row",[r("v-col",{attrs:{cols:"6"}},[r("v-text-field",{attrs:{color:"indigo",label:"Цена",required:""},model:{value:t.price,callback:function(e){t.price=e},expression:"price"}})],1),r("v-col",{attrs:{cols:"6"}},[r("v-text-field",{attrs:{color:"indigo",label:"Количество",required:""},model:{value:t.quantity,callback:function(e){t.quantity=e},expression:"quantity"}})],1),r("v-col",[r("v-checkbox",{attrs:{label:"Доступнно"},model:{value:t.in_stock,callback:function(e){t.in_stock=e},expression:"in_stock"}})],1),r("v-col",[r("v-file-input",{attrs:{label:"Изображение","prepend-icon":"camera",rules:t.rules_img,accept:"image/png, image/jpeg, image/bmp"},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}})],1)],1)],1),r("v-btn",{staticClass:"ma-2",attrs:{outlined:"",color:"indigo",type:"submit"}},[t._v("Добавить товар")]),r("v-btn",{staticClass:"ma-2",attrs:{outlined:"",color:"indigo"},on:{click:function(e){t.dialog=!1}}},[t._v("Вернуться")])],1)],1)],1)],1)},oe=[],ce=(r("a4d3"),r("e01a"),{name:"NewProduct",data:function(){return{dialog:!1,name:"",description:"",price:"",quantity:"",in_stock:!1,file:"",image:"",rules_img:[function(t){return!t||t.size<2e6||"Размер картинки не должен превышать 2 MB!"}],Rules:[function(t){return!!t||"Field is required"}]}},methods:{add_new_product:function(){var t=new FormData;t.append("image",this.file),t.append("name",this.name),t.append("description",this.description),t.append("price",this.price),t.append("quantity",this.quantity),t.append("in_stock",this.in_stock),this.$store.dispatch("add_new_product",t);var e={name:this.name,description:this.description,price:this.price,quantity:this.quantity,in_stock:this.in_stock,fd:t};this.name="",this.description="",this.price="",this.quantity="",this.in_stock="",this.file="",this.image="",console.log(e),this.dialog=!1}}}),le=ce,ue=Object(l["a"])(le,ie,oe,!1,null,null,null),de=ue.exports,me=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[r("v-icon",t._g({staticClass:"mr-2"},s),[t._v(" edit ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[r("v-card",[r("v-form",{on:{submit:t.edit_product}},[r("v-toolbar",{attrs:{flat:"",color:"indigo",dark:""}},[r("v-toolbar-title",[t._v("Новый товар")])],1),r("v-container",[r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{color:"indigo",rules:t.Rules,label:"Наименование",required:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),r("v-col",{attrs:{cols:"12"}},[r("v-textarea",{attrs:{color:"indigo",rules:t.Rules,label:"Описание",required:""},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1),r("v-col",{attrs:{cols:"12"}},[r("v-row",[r("v-col",{attrs:{cols:"6"}},[r("v-text-field",{attrs:{color:"indigo",label:"Цена",required:""},model:{value:t.price,callback:function(e){t.price=e},expression:"price"}})],1),r("v-col",{attrs:{cols:"6"}},[r("v-text-field",{attrs:{color:"indigo",label:"Количество",required:""},model:{value:t.quantity,callback:function(e){t.quantity=e},expression:"quantity"}})],1),r("v-col",[r("v-checkbox",{attrs:{label:"Доступнно"},model:{value:t.in_stock,callback:function(e){t.in_stock=e},expression:"in_stock"}})],1),r("v-col",[r("v-file-input",{attrs:{label:"Изображение"},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}})],1)],1)],1),r("v-btn",{staticClass:"ma-2",attrs:{outlined:"",color:"indigo",type:"submit"}},[t._v("Изменить")]),r("v-btn",{staticClass:"ma-2",attrs:{outlined:"",color:"indigo"},on:{click:function(e){t.dialog=!1}}},[t._v("Вернуться")])],1)],1)],1)],1)},fe=[],ve={name:"EditProduct",props:{product:Object},data:function(){return{dialog:!1,name:"",description:"",price:"",quantity:"",in_stock:!1,file:"",id:"",Rules:[function(t){return!!t||"Field is required"}]}},methods:{edit_product:function(){var t=new FormData;try{this.file&&this.file.type.match("image.*")&&t.append("image",this.file)}finally{t.append("id",this.id),t.append("name",this.name),t.append("description",this.description),t.append("price",this.price),t.append("quantity",this.quantity),t.append("in_stock",this.in_stock);var e={id:this.id,data:t};this.$store.dispatch("edit_product",e)}this.dialog=!1}},beforeMount:function(){this.name=this.product.name,this.description=this.product.description,this.price=this.product.price,this.quantity=this.product.quantity,this.in_stock=this.product.in_stock,this.image=this.product.image,this.id=this.product.id}},pe=ve,_e=Object(l["a"])(pe,me,fe,!1,null,null,null),he=_e.exports,ge={name:"MarketManagement",components:{EditProduct:he,NewProduct:de},data:function(){return{uploader:!1,dialog:!1,headers:[{text:"Изображение",value:"image",sortable:!1},{text:"Наименование",sortable:!1,value:"name"},{text:"Цена",value:"price"},{text:"Количество",value:"quantity"},{text:"Доступно",value:"in_stock"},{text:"Действия",value:"action",sortable:!1}],in_stock_items:[]}},beforeCreate:function(){var t=this;this.$store.dispatch("get_products").then((function(e){console.log(e),t.initialize()}))},computed:{products:function(){return this.$store.getters.products}},beforeMount:function(){this.initialize()},watch:{dialog:function(t){t||this.close()}},methods:{initialize:function(){var t=this;this.products.forEach((function(e){!0===e.in_stock&&t.in_stock_items.push(e.id)}))},restock:function(t){t.in_stock=!t.in_stock;var e={id:t.id,in_stock:t.in_stock};this.$store.dispatch("restock_product",e)},delete_product:function(t){this.$store.dispatch("delete_product",t).then()}}},be=ge,xe=Object(l["a"])(be,ae,ne,!1,null,null,null),ye=xe.exports,ke=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-layout",[s("v-card",{staticClass:"mx-auto",attrs:{width:"100%"}},[s("v-toolbar",{attrs:{color:"primary",dark:""}},[s("v-icon",{staticClass:"mr-3"},[t._v("mail")]),s("v-toolbar-title",[t._v("Входящие")])],1),0===t.feedback_messages.length?s("v-card-text",{staticClass:"mb-6 mt-6 text-center"},[t._v(" Пока сообщений нет ")]):t._e(),s("v-expansion-panels",{attrs:{focusable:""}},t._l(t.feedback_messages,(function(e){return s("v-expansion-panel",{key:e.id},[s("v-expansion-panel-header",[t.user.image?s("v-img",{staticClass:"v-avatar mr-3",attrs:{"max-width":"50px",src:t.user.image}}):s("v-img",{staticClass:"v-avatar mr-3",attrs:{"max-width":"50px",src:r("113c")}}),s("v-card-text",[s("div",{staticClass:"subheading"},[t._v(" "+t._s(e.topic)+" "),s("span",{staticClass:"float-right grey--text"},[t._v(" "+t._s(t.dateformat(e.created_at)))])]),s("div",{staticClass:"grey--text"},[t._v(t._s(e.author.first_name)+" "+t._s(e.author.last_name))])])],1),s("v-expansion-panel-content",[s("span",{staticClass:"text&#45;&#45;primary"},[t._v(" "+t._s(e.text))]),s("div",[s("v-btn",{attrs:{target:"_blank",rel:"noopener noreferrer",href:t.malitoGen(e)}},[t._v("Ответить")])],1)])],1)})),1)],1)],1)},we=[],Ce={name:"Inbox",data:function(){return{}},beforeCreate:function(){this.$store.dispatch("getallusers"),this.$store.dispatch("get_feedback")},computed:{users_list:function(){return this.$store.getters.users_list},user:function(){return this.$store.getters.logged_user},feedback_messages:function(){return this.$store.getters.feedback_messages},messages:function(){return null}},methods:{dateformat:function(t){var e=new Date(t),r=e.toDateString()+" "+e.getHours()+":"+e.getMinutes();return r},malitoGen:function(t){var e=t.author,r="https://mail.google.com/mail/?view=cm&fs=1&to="+e.email+"&su="+ +t.topic+"&body="+e.first_name+", спасибо за обращение.";return r}}},Ae=Ce,Re=Object(l["a"])(Ae,ke,we,!1,null,"53940984",null),$e=Re.exports,Oe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-layout",{attrs:{column:"","align-center":""}},[s("v-layout",{attrs:{column:""}},[s("div",{staticClass:"text-center ma-3"},[s("h1",[t._v("Особые поощрения ")]),s("span",{staticClass:"subtitle-1",staticStyle:{"max-width":"800px"}},[t._v(" Баллы, начисленные через особые поощрения будут добавлены пользователям из общего банка баллов ")])])]),s("v-stepper",{model:{value:t.e1,callback:function(e){t.e1=e},expression:"e1"}},[s("v-stepper-header",[s("v-stepper-step",{attrs:{complete:t.e1>1,step:"1",editable:""}},[t._v("Выбор Пользователей")]),s("v-stepper-step",{attrs:{complete:t.e1>2,step:"2",editable:""}},[t._v("Выбор категории")]),s("v-stepper-step",{attrs:{step:"3"}},[t._v("Подтвержение")])],1),s("v-stepper-items",[s("v-stepper-content",{attrs:{step:"1"}},[s("v-card",{staticClass:"mb-4 overflow-y-auto",attrs:{flat:"","max-height":"350"}},[s("v-card-text",[s("v-text-field",{attrs:{"append-icon":"search",label:"Поиск","single-line":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._l(t.searching(),(function(e){return s("v-list-item",{key:e.id},[s("v-list-item-avatar",[e.image?s("v-img",{attrs:{src:e.image}}):s("v-img",{attrs:{src:r("113c")}})],1),s("v-list-item-content",[t._v(" "+t._s(e.first_name)+" "+t._s(e.last_name)+" ")]),s("v-checkbox",{attrs:{value:e.id},model:{value:t.selected_users,callback:function(e){t.selected_users=e},expression:"selected_users"}})],1)}))],2)],1),s("div",{staticClass:"float-right"},[s("v-btn",{attrs:{text:""},on:{click:t.reset}},[t._v("Отмена")]),s("v-btn",{attrs:{color:"primary"},on:{click:function(e){t.e1=2}}},[t._v(" Далее ")])],1)],1),s("v-stepper-content",{attrs:{step:"2"}},[s("v-card",{staticClass:"mb-5 overflow-y-auto",attrs:{flat:"","max-height":"350"}},[s("v-card-text",[s("v-radio-group",{model:{value:t.selected_cat,callback:function(e){t.selected_cat=e},expression:"selected_cat"}},[t._l(t.categories,(function(e){return s("v-list-item",{key:e.id},[s("v-list-item-content",[t._v(" "+t._s(e.name)+" ")]),s("v-radio",{attrs:{value:e}})],1)}))],2)],1)],1),s("v-card-text",[1!==t.labels.length?s("v-slider",{attrs:{"tick-labels":t.labels,max:t.labels.length-1,step:"1",ticks:"always","tick-size":"4"},model:{value:t.point_i,callback:function(e){t.point_i=e},expression:"point_i"}}):s("div",{staticClass:"ma-4 text-center"},[s("h1",[t._v(t._s(t.labels[t.point_i]))])])],1),s("div",{staticClass:"float-right"},[s("NewCategory"),s("v-btn",{attrs:{text:""},on:{click:t.reset}},[t._v("Отмена")]),s("v-btn",{attrs:{color:"primary"},on:{click:function(e){t.e1=3}}},[t._v(" Далее ")])],1)],1),s("v-stepper-content",{attrs:{step:"3"}},[s("v-card",{staticClass:"mb-6",attrs:{flat:""}},[s("v-card-title",[t._v(" Новое поощерение ")]),s("v-card-text",[s("v-row",{attrs:{wrap:""}},[s("v-col",[s("p",{staticClass:"subtitle-1 text--black"},[t._v(" Пользователи:")]),t._l(t.filtered(),(function(e){return s("div",{key:e.id},[t._v(" "+t._s(t.user_to_str(e))+" ")])})),0===t.selected_users.length?s("div",[t._v(" Вернитесь к выбору пользователей ")]):t._e()],2),s("v-col",[s("p",{staticClass:"subtitle-1"},[t._v(" Категория:")]),t._v(" "+t._s(t.selected_cat.name||"Вернитесь к выбору категории")+" ")]),s("v-col",[s("p",{staticClass:"subtitle-1"},[t._v(" Количество:")]),t._v(" "+t._s(t.selected_cat.values[t.point_i]||"Колличество баллов не выбрано")+" ")])],1),s("v-row")],1),s("v-card-actions",[s("v-text-field",{attrs:{required:"",type:"text",color:"indigo",label:"Комментарий"},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}})],1)],1),s("div",{staticClass:"float-right"},[s("v-btn",{attrs:{text:""},on:{click:t.reset}},[t._v("Отмена")]),s("v-btn",{attrs:{color:"primary",disabled:t.disabled()},on:{click:t.super_add_points}},[t._v(" Сохранить ")])],1)],1)],1)],1)],1)},Se=[],Ie=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[r("v-btn",t._g({attrs:{color:"primary",dark:""}},s),[r("v-icon",[t._v("add")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[r("v-card",[r("v-form",{on:{submit:t.add_cat}},[r("v-toolbar",{attrs:{flat:"",color:"indigo",dark:""}},[r("v-toolbar-title",[t._v("Новая Категория")])],1),r("v-container",[r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{id:"name",color:"indigo",rules:t.Rules,label:"Название",required:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{id:"values",hint:"введите допустимые значения через запятую без пробелов",counter:"",color:"indigo",rules:t.Rules,label:"Допустимые значения",required:""},model:{value:t.values,callback:function(e){t.values=e},expression:"values"}})],1),r("v-btn",{staticClass:"ma-2",attrs:{outlined:"",color:"indigo",type:"submit"}},[t._v("Добавить категорию")]),r("v-btn",{staticClass:"ma-2",attrs:{outlined:"",color:"indigo"},on:{click:function(e){t.dialog=!1}}},[t._v("Вернуться")])],1)],1)],1)],1)},je=[],Ee={name:"NewCategory",data:function(){return{dialog:!1,name:"",values:"",Rules:[function(t){return!!t||"Обязательное поле"}]}},methods:{add_cat:function(){var t={name:this.name,values:this.values};this.name=null,this.values=null,alert(JSON.stringify(t)),this.$store.dispatch("add_new_cat",t),this.dialog=!1}}},Pe=Ee,Te=Object(l["a"])(Pe,Ie,je,!1,null,null,null),Ue=Te.exports,qe={name:"CategoryManagement",components:{NewCategory:Ue},data:function(){return{e1:1,point_set:[10,20,30],selected_users:[],selected_cat:[],point_i:1,comment:"Особое поощрение",labels:[],search:""}},beforeCreate:function(){this.$store.dispatch("getallusers"),this.$store.dispatch("get_all_categories")},computed:{users_list:function(){return this.$store.getters.users_list},categories:function(){return this.$store.getters.categories.filter((function(t){return"Спасибо"!==t.name}))}},methods:{super_add_points:function(){var t={to_user:this.selected_users,category:this.selected_cat.id,amount:this.selected_cat.values[this.point_i],comment:this.comment};this.$store.dispatch("add_super_transaction",t)},filtered:function(){var t=this;return this.users_list.filter((function(e){return t.selected_users.includes(e.id)}))},disabled:function(){return 0===this.selected_users.length||""===this.selected_cat||!this.selected_cat.values[this.point_i]},user_to_str:function(t){return t.first_name+" "+t.last_name},reset:function(){this.e1=1,this.selected_users=[],this.selected_cat=[],this.point_i=0,this.comment="Особое поощрение"},searching:function(){if(!this.search)return this.users_list;var t=this.search.toLowerCase();return this.users_list.filter((function(e){var r=e.first_name.toLowerCase(),s=e.last_name.toLowerCase();return r.indexOf(t)>-1||s.indexOf(t)>-1}))}},watch:{selected_cat:function(){this.labels=this.selected_cat.values.sort((function(t,e){return t-e})),1===this.labels.length&&(this.point_i=0)}}},Me=qe,Ne=Object(l["a"])(Me,Oe,Se,!1,null,"02560148",null),ze=Ne.exports,De=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-toolbar",{attrs:{flat:"",color:"none"}},[r("v-app-bar-nav-icon",{staticClass:"ma-3",on:{click:function(e){return t.$router.push("/shop")}}},[r("v-icon",{attrs:{large:""}},[t._v("navigate_before ")]),t._v(" "),r("span",[t._v("Назад")])],1),r("v-spacer"),r("Cart")],1),r("v-layout",{attrs:{row:"",wrap:"","align-content-center":""}},[r("v-flex",{staticClass:"pa-3",attrs:{xs12:"",sm12:"",md6:"","align-self-center":""}},[r("v-avatar",{attrs:{size:"90%",tile:""}},[r("img",{attrs:{src:t.product.image}})])],1),r("v-flex",{attrs:{xs12:"",sm12:"",md6:"","align-self-center":""}},[r("v-card",[r("v-card-title",{staticClass:"flex-column align-content-start"},[r("span",{staticClass:"headline mb-3"},[t._v(" "+t._s(t.product.name)+" ")]),r("span",{staticClass:"subtitle align-self-start"},[t._v(" "+t._s(t.product.price)+" Б ")])]),r("v-card-text",[t._v(" "+t._s(t.product.description)+" ")]),r("v-card-actions",[r("v-btn",{attrs:{color:"primary",disabled:t.product.quantity<1},on:{click:function(e){return t.add_to_cart(t.product)}}},[t._v(" В корзину")]),r("v-spacer"),r("span",{directives:[{name:"show",rawName:"v-show",value:t.product.quantity<1,expression:"product.quantity<1"}],staticClass:"mr-3"},[t._v(" Нет в наличии")])],1)],1)],1),r("v-bottom-sheet",{model:{value:t.sheet,callback:function(e){t.sheet=e},expression:"sheet"}},[r("v-sheet",{staticClass:"text-center",attrs:{height:"180px"}},[r("div",{staticClass:"py-3"},[t._v("Товар "+t._s(t.last_add.name)+" успешно добавлен в корзину")]),r("v-layout",{attrs:{row:"","align-center":"","justify-center":""}},[r("v-flex",{staticClass:"text-center",attrs:{sm2:""}},[r("Cart",{on:{click:function(e){t.sheet=!t.sheet}}}),r("div",{staticClass:"subtitle-2"},[t._v("Перейти в "),r("br"),t._v("корзину")])],1),r("v-flex",{attrs:{sm2:""}},[r("v-avatar",{attrs:{tile:"",size:"100"}},[r("img",{attrs:{src:t.last_add.image}})])],1),r("v-flex",{attrs:{sm2:""}},[r("v-btn",{attrs:{text:"",fab:"",large:"",to:"/shop"}},[r("v-icon",{attrs:{large:"",color:"grey darken-1"}},[t._v("store")])],1),r("div",{staticClass:"subtitle-2"},[t._v(" Продолжить "),r("br"),t._v(" покупки")])],1)],1)],1)],1)],1)],1)},Ke=[],Be=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[r("v-app-bar-nav-icon",t._g({staticClass:"ma-3"},s),[r("v-badge",{attrs:{color:"green",content:t.cart.numbers.reduce((function(t,e){return t+e}),0),value:t.cart.numbers.reduce((function(t,e){return t+e}),0)}},[r("v-icon",{attrs:{large:"",color:"grey-2"}},[t._v("shopping_cart ")])],1)],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[r("v-card",[r("v-form",{on:{submit:t.new_order}},[r("v-toolbar",{attrs:{flat:"",color:"purple",dark:""}},[r("v-toolbar-title",[t._v("Корзина")])],1),t.cart.products.length>0?r("v-list",[t._l(t.cart.products,(function(e,s){return r("v-list-item",{key:e.id},[r("v-list-item-content",[r("v-layout",{attrs:{"align-center":""}},[r("v-img",{staticClass:"v-avatar--tile mr-3",attrs:{"max-width":"100px",src:e.image}}),r("v-card-text",[r("div",{staticClass:"subheading"},[t._v(" "+t._s(e.name)+" "),r("span",{staticClass:"float-right"},[r("v-icon",{attrs:{small:""},on:{click:function(r){return t.decrease(e)}}},[t._v("remove")]),t._v(" "+t._s(t.cart.numbers[s])+" "),r("v-icon",{attrs:{small:""},on:{click:function(r){return t.increase(e)}}},[t._v("add")])],1)]),r("div",{staticClass:"text--secondary"},[t._v(t._s(e.price)+" Б")])])],1)],1)],1)})),r("v-divider"),r("div",{staticClass:"text--accent-1 mr-6 float-right"},[t._v("Итог: "+t._s(t.sum))])],2):r("v-card-text",{staticClass:"text-center mt-5 mb-5"},[r("v-icon",{attrs:{large:""}},[t._v("shop")]),r("h3",[t._v("Ваша корзина пуста")])],1),r("v-card-actions",[r("v-btn",{staticClass:"ma-2",attrs:{outlined:"",color:"purple"},on:{click:function(e){t.dialog=!1}}},[t._v("Вернуться")]),t.cart.products.length>0?r("v-btn",{staticClass:"ma-2",attrs:{right:"",outlined:"",color:"purple",type:"submit"}},[t._v("Оформить")]):t._e()],1)],1)],1)],1)},Qe=[],Ve={name:"Cart",data:function(){return{dialog:!1,selected:[]}},computed:{cart:function(){return this.$store.getters.cart},sum:function(){var t=this,e=0;return this.cart.products.forEach((function(r,s){return e+=r.price*t.cart.numbers[s]})),e}},methods:{new_order:function(){var t=this,e=this.cart.products,r={products:[]};e.forEach((function(e,s){return r.products.push({product:e.id,quantity:t.cart.numbers[s]})})),this.$store.dispatch("new_order",r),this.dialog=!1},increase:function(t){this.$store.dispatch("add_to_cart",t)},decrease:function(t){this.$store.dispatch("remove_from_cart",t)}}},Xe=Ve,We=Object(l["a"])(Xe,Be,Qe,!1,null,"67ee99bc",null),Fe=We.exports,Ge={name:"Product",components:{Cart:Fe},data:function(){return{sheet:!1,last_add:{}}},beforeRouteLeave:function(t,e,r){var s=t.path.match("/shop");null===s&&(localStorage.removeItem("search"),localStorage.removeItem("filter")),r()},computed:{product:function(){var t=this;return this.$store.getters.products.find((function(e){return e.id==t.$route.params.id}))}},methods:{add_to_cart:function(t){var e=this;this.$store.dispatch("add_to_cart",t).then((function(){e.sheet=!0,e.last_add=t}))}}},He=Ge,Le=Object(l["a"])(He,De,Ke,!1,null,"6e45b541",null),Je=Le.exports,Ye=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-layout",{attrs:{"align-center":""}},[r("v-card",{staticClass:"mx-auto",attrs:{width:"100%"}},[r("v-toolbar",{attrs:{color:"primary",dark:""}},[r("v-icon",{staticClass:"mr-3"},[t._v("list_alt")]),r("v-toolbar-title",[t._v("Список заказов")]),r("v-spacer")],1),0===t.orders.length?r("v-card-text",{staticClass:"mb-6 mt-6 text-center"},[t._v(" Пока заказов нет ")]):t._e(),r("v-expansion-panels",{attrs:{focusable:""}},t._l(t.orders,(function(e){return r("v-expansion-panel",{key:e.id},[r("v-expansion-panel-header",[r("v-img",{staticClass:"v-avatar mr-3",attrs:{"max-width":"50px",src:"https://randomuser.me/api/portraits/men/78.jpg"}}),r("v-card-text",[r("div",{staticClass:"subheading"},[t._v(" Заказ №"+t._s(e.id)),r("v-icon",{attrs:{small:"",color:t.getColor(e.active)}},[t._v("fiber_manual_record")]),r("span",{staticClass:"float-right grey--text"},[t._v(" "+t._s(t.dateformat(e.created_at)))])],1),r("div",{staticClass:"grey--text"},[t._v(t._s(e.customer.first_name)+" "+t._s(e.customer.last_name))])])],1),r("v-expansion-panel-content",[r("span",{staticClass:"text&#45;&#45;primary"},[t._v(" Заказ на сумму: "+t._s(e.total)+" Б Доставлен: "+t._s(e.delivered_at||"нет")+" ")]),r("v-row",{attrs:{wrap:""}},[r("v-col",[r("p",{staticClass:"subtitle-1 text--black"},[t._v(" Товары:")]),r("v-list",t._l(e.products,(function(e){return r("v-list-item",{key:e.id},[r("v-list-item-content",[r("v-layout",{attrs:{"align-center":""}},[r("v-img",{staticClass:"v-avatar--tile mr-3",attrs:{"max-width":"40px",src:e.product.image}}),r("v-card-text",[r("div",{staticClass:"subheading"},[t._v(" "+t._s(e.product.name)+" ")])])],1)],1)],1)})),1)],1),r("v-col",[r("p",{staticClass:"subtitle-1"},[t._v(" Количество:")]),r("v-list",t._l(e.products,(function(e){return r("v-list-item",{key:e.id},[r("v-list-item-content",[r("v-layout",{attrs:{"align-center":""}},[r("v-card-text",[r("span",{staticClass:"subheading"},[t._v(" "+t._s(e.quantity)+" ")])])],1)],1)],1)})),1)],1),r("v-col",[r("p",{staticClass:"subtitle-1"},[t._v(" Операции:")]),r("div",[r("v-btn",{attrs:{target:"_blank",rel:"noopener noreferrer",href:t.malitoGen(e)}},[t._v("Связаться")])],1),r("v-btn",{on:{click:function(r){return t.changeorderstatus(e)}}},[t._v(t._s(t.btntext(e.active)))])],1)],1),r("v-row")],1)],1)})),1)],1)],1)},Ze=[],tr={name:"Orders",beforeCreate:function(){this.$store.dispatch("getallusers"),this.$store.dispatch("get_orders")},computed:{users_list:function(){return this.$store.getters.users_list},user:function(){return this.$store.getters.logged_user},orders:function(){return this.$store.getters.orders},messages:function(){return null}},methods:{btntext:function(t){return t?"Завершить":"Сделать активным"},dateformat:function(t){var e=new Date(t),r=e.toDateString()+" "+e.getHours()+":"+e.getMinutes();return r},malitoGen:function(t){var e=t.customer,r="https://mail.google.com/mail/?view=cm&fs=1&to="+e.email+"&su=Обработка заказа №"+t.id+"&body="+t.customer.first_name+", спасибо за заказ в MuranoMarket.";return r},getColor:function(t){return t?"red":"green"},changeorderstatus:function(t){var e={id:t.id,active:!t.active};this.$store.dispatch("change_order_status",e)}}},er=tr,rr=Object(l["a"])(er,Ye,Ze,!1,null,"caee8d56",null),sr=rr.exports,ar=r("6838"),nr=r.n(ar),ir=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",{attrs:{id:"inspire"}},[s("v-navigation-drawer",{attrs:{app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[s("v-list-item",[s("v-list-item-avatar",[t.user.image?s("v-img",{attrs:{src:t.user.image}}):s("v-img",{attrs:{src:r("113c")}})],1),s("v-list-item-content",[s("v-list-item-title",[t._v(t._s(t.user_fio()))])],1)],1),s("v-divider"),s("v-list",{attrs:{dense:""}},[s("v-list-item",{attrs:{link:"",to:"/"}},[s("v-list-item-action",[s("v-icon",[t._v("home")])],1),s("v-list-item-content",[s("v-list-item-title",[t._v("Личный кабинет")])],1)],1),s("v-list-item",{attrs:{link:"",to:"/users"}},[s("v-list-item-action",[s("v-icon",[t._v("supervised_user_circle")])],1),s("v-list-item-content",[s("v-list-item-title",[t._v("Коллеги")])],1)],1),s("v-list-item",{attrs:{link:"",to:"/rating"}},[s("v-list-item-action",[s("v-icon",[t._v("stars")])],1),s("v-list-item-content",[s("v-list-item-title",[t._v("Рейтинг")])],1)],1),s("v-list-item",{attrs:{link:"",to:"/shop"}},[s("v-list-item-action",[s("v-icon",[t._v("store")])],1),s("v-list-item-content",[s("v-list-item-title",[t._v("Маркетплейс")])],1)],1),s("v-list-item",{attrs:{link:"",to:"/transactions"}},[s("v-list-item-action",[s("v-icon",[t._v("history")])],1),s("v-list-item-content",[s("v-list-item-title",[t._v("История операций")])],1)],1),s("v-list-item",{attrs:{link:"",to:"/feedback"}},[s("v-list-item-action",[s("v-icon",[t._v("feedback")])],1),s("v-list-item-content",[s("v-list-item-title",[t._v("Обратная связь")])],1)],1),t.teamleadUser||t.adminUser?s("v-list-item",{attrs:{link:"",to:"/promotions"}},[s("v-list-item-action",[s("v-icon",[t._v("group_add")])],1),s("v-list-item-content",[s("v-list-item-title",[t._v("Особые поощрения")])],1)],1):t._e(),t.adminUser?s("v-list-item",{attrs:{link:"",to:"/special"}},[s("v-list-item-action",[s("v-icon",[t._v("settings")])],1),s("v-list-item-content",[s("v-list-item-title",[t._v("Специальные "),s("br"),t._v(" возможности")])],1)],1):t._e(),t.loggedIn?s("v-list-item",{attrs:{link:""},on:{click:t.logout}},[s("v-list-item-action",[s("v-icon",[t._v("exit_to_app")])],1),s("v-list-item-content",[s("v-list-item-title",[t._v("Выход")])],1)],1):t._e()],1)],1),s("v-app-bar",{attrs:{app:"",color:"indigo",dark:""}},[s("v-app-bar-nav-icon",{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}),s("v-toolbar-title",[t._v("Gamification")]),s("v-spacer"),s("a",{attrs:{href:"https://www.muranosoft.ru/"}},[s("v-img",{staticClass:"ma-3",attrs:{src:t.logo,"max-width":"50px"}})],1)],1),s("v-content",[s("v-container",{attrs:{fluid:""}},[s("transition",{attrs:{name:"component-fade",mode:"out-in"}},[s("router-view")],1)],1)],1),s("v-footer",{attrs:{color:"indigo",app:""}},[s("span",{staticClass:"white--text"},[t._v("© 2020 DKA")])])],1)},or=[],cr={props:{source:String},data:function(){return{transition:"",drawer:!0,logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAABZCAMAAACgyf5cAAAAsVBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+3mHKcAAAAOnRSTlMAkfuMmCDv4AQS8+lMXZU828MI5LtAMncM+NXRnX4uKSamNxahHWRURPVwWMe/s6qCaq6HGg4ry0lQLT9VaQAABwVJREFUaN7M2Ol6ojAUBuAjKrK44i6Ca7VqBbWOtt/9X9g8A4wUYySp2KfvX0VO4lkC9Czl4Vk1VFU1Smd7683zzn5ZG/foN9O3uKFv2l5u/zGy6FfycIdS2uYWp18XebGPVGYrvyzST9KKOt1xUiBEsauVI/0It7s1V2rdfyWuBoQpDadGT9bJ1/Gf94c4ZmfIKFVrGj3LyBngqxbxaC1AMu42PUFvwQZSI64WZA2cMWXLrRpgdSiLvY61lhpl5jWOgEmPtKi3leF86DXe6k1DQapmV6csaBubc4Mxxbg9RHWjn+kV3fbnYjff1lXcYRReHg95UQdHWqvSwyvNGdNcpstuYdsEhzLp0EMWTfCs07PqbhZZo8/3A2dH/AeG5ccAXC1Kl0PAIS5tvKm+GWAVZvQtoxZuMJtx50ijh99VTnTX7CNvM0Xa75I8Kw+WOdnMwvqak4g1RL9crMxNJNVfSdKniWt2vq0RleONTmdFOeuSAK1dHSDB10nCHx9X6rvoxm/4xyMx7wgMSdC0WsIX6lKiAFUkqIXLiaaNQIXEnBAwiiSsPVkh5lskRMshobH5cmE+XIXwAGjEixSmL864aNZIwNjGF2pulFhQPVwHMY7t9gux8nGDlDEdxtvdFUiNFWLNtUUJHQR2TPF7CqB47GCvIB6LUmaOiYiv0X1dxAYVXg9bUlLHQIjpUh2EPkmata8jZB/pniou7DL/8xolvKiIrEaUpBvxfyyvEoVtusSlHRK7zD/bn26M69vNTRsw80XKIkwSgztoeg1E1D1F2BDY5mGZuFD1qytsBLb0TZpj4J9yWsw5i1cdYXilXrIKV4i5t3f6TN82m/CjthoIvblEKUHr/Pcc09s7bVr0fbUgtT/46aqsie4GzQ44XcVF//iEoEnbAVhN6dokyr0ipQXN5oDHP2b3mnHQjzjZgDG+PbnWKeml3mzHbUTYzDv2EbDpUTlgoCc7SzgAp2KneuwpaYfIO+eRC1t6WNmAlxj1Qf0fLEpz5nTd/YpTD12EJvS44xnOdbU4lM5HYMAmzrpQWL8QY46QQ1kYYpMczhWxxGLmuFA+oUKZyKNIoSWA/iuJ2EDuKFFGaDWmbOy8+KWK2ZF7yT8gMT5CNmVlv/zf7UxX8kkESxIQz8odZcUKCscFVJdEdaVaWC4e7tnyoUj85KgvsdUdJV5ipmrxFJPK0oFGqQ6ILChbB6xJRhuRPKWpIGJrlClXelZ5EEyQk/qsjfalj1+uglBKKeh/27fT5kSBIAzAzSGCJ4qIB6gYPFEXxKjp///D1lGQGSBmda0ttoqn8klBXgecQbtTxlAL3mum6fAsD0Pl0qOpaUv9+v5englPk08YerAkHYYYCeDNrAM8b4p39e82qWJkC+/22qRfj1PbCqTJAd6pH5ATRhxqZfQgwdWop6eQGxbGpIYuU6ugV8ZYvwk54iOtugt897zwLVtjH8/ROBO1Pv7odICcOXTwBxzk0FzCB9RcXc4xRajgN6o+5JZiqJkX8zx33WCsZqLcutp4R/gPlM6+YP+yL3+Bv8zNClgoFAqFQqFQKPwr7t7hPhIP2Q6nwM3CFn+59Ncsx2xEm09tkWY25gqwlrboCD2gtQPb0YFyME17ARHdM0VGUJMhRUTEVhsIuk43oZ4WqZv+ClXUr2NSeQa0zzJeBOn6YkAFGdPf3gVMsyGlkewg+GJaJATykmzPEj+hQvfLoVtDt5dV8Kil38hgyoQWolGXMI0fZYfGPVWkeCr0Bno3srynNyV8RH4rIWpKIjQRZIXukmHQP0sR5UjOi54Vus/HLaRT6bnQLfZXPi5RODhdX8DJCI2DUWZotg+mR7ZuZoXukDGy79WS/fa10F4idIcM0u0anrOhd2skrOyRHv9Z6HYnPF5JIyd8/0ToYVdfEnrTHbKbWmEYlwQZMaE7oGsk9Wb8eugNtAfXSaJURlQVaD0RmsYMaZMn4aJPzZYJrcrQM5Ew/iI0KCoJt0PUSvBaaJ5HRJNt+l7Ik8mkTeKjQYcewEVNug62PHs5NIyrSKy68Fzo4bE5csm+lbkynbDTPy/xF1hZ4cUyGRqU64yoeauXQ0NXIjtMISO0wDaN8ePkB/HQIkdfMN0eSarChibqlespejR7qA9DwxKRP0MyNIeIO/1cu9HnFcRViQ5NrWSDLoQOl2QVa23crA2NzHvp0KDskWBC875ei+iLKj1Pp0NDTXIhFdrClCHQoZnm64Cq51vJopjLhA7N+/jjiniEJDHdLLOh7j0+1O//oWhOhYbSCS+qbvRON0Db3+u3SvU6e9zNyHTbeHTvYULKwjHXwPJNMVAgpNS9BhcL1lOIdE3OifftWSbH7UWyo+dw5ghoM04UbneLbUs0jcThnK94plwLDY4iGEu4+w2eDaflmU8DXgAAAABJRU5ErkJggg=="}},computed:{loggedIn:function(){return this.$store.getters.loggedIn},adminUser:function(){return this.$store.getters.adminUser},teamleadUser:function(){return this.$store.getters.teamleadUser},user:function(){return this.$store.getters.logged_user}},methods:{logout:function(){this.$store.dispatch("destroyToken")},user_fio:function(){return void 0==this.user.first_name?" ":this.user.first_name+" "+this.user.last_name}}},lr=cr,ur=Object(l["a"])(lr,ir,or,!1,null,null,null),dr=ur.exports,mr=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-toolbar",{attrs:{flat:"",color:"none"}},[s("v-app-bar-nav-icon",{staticClass:"ma-3",on:{click:function(e){return t.$router.push("/users")}}},[s("v-icon",{attrs:{large:""}},[t._v("navigate_before ")]),t._v(" "),s("span",[t._v("Назад")])],1),s("v-spacer")],1),s("v-layout",{attrs:{row:"",wrap:"","align-content-center":""}},[s("v-flex",{staticClass:"pa-3",attrs:{xs12:"",sm12:"",md6:""}},[s("v-card",{attrs:{flat:""}},[s("v-layout",{attrs:{row:""}},[s("v-row",{attrs:{justify:"center",sm6:""}},[s("v-avatar",{staticClass:"ma-3",attrs:{size:"150"}},[t.user.image?s("v-img",{attrs:{src:t.user.image}}):s("v-img",{attrs:{src:r("113c")}})],1)],1),s("v-flex",{attrs:{sm6:"","align-self-center":""}},[s("div",[s("div",{staticClass:"title black--text "},[t._v(t._s(t.user.first_name)+" "+t._s(t.user.last_name))]),s("div",{staticClass:"subtitle-2"},[t._v(t._s(t.user.position))]),s("div",{staticClass:"subtitle-2"},[t._v(t._s(t.user.email))])])])],1),s("v-flex",[s("v-card-text",[s("div",{staticClass:"subtitle-2"},[t._v(" О себе: "),s("v-card-text",[t._v(" "+t._s(t.user.profile)+" ")])],1)])],1),s("v-layout",{staticClass:"text-center ma-3",attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs4:""}},[s("div",[t._v("Баллы Спасибо")]),s("v-progress-circular",{attrs:{rotate:-90,size:100,width:15,value:10*t.user.share_points,color:"primary"}},[t._v(" "+t._s(t.user.share_points+"/10")+" ")])],1),s("v-flex",{attrs:{xs4:""}},[s("div",[t._v(" Рейтинг ")]),s("v-icon",{attrs:{size:"80",color:"orange"}},[t._v("emoji_events")]),s("div",{staticClass:"subtitle-2 orange--text"},[t._v(" "+t._s(t.placelabel()))])],1),s("v-flex",{attrs:{xs4:""}},[s("div",[t._v(" Личные баллы ")]),s("v-col",{staticClass:"font-weight-black red--text display-3 mt-3",attrs:{"align-self":"center"}},[t._v(" "+t._s(t.user.personal_points))])],1)],1)],1)],1),s("v-flex",{attrs:{xs12:"",sm12:"",md6:""}},[s("v-card",{attrs:{flat:""}},[s("div",{staticClass:"text-center ma-3 title"},[t._v(" Бейджи")]),0===t.interest_list.length?s("div",[s("div",{staticClass:"text-center ma-6"},[t._v(" Данный пользователей не выбрал для себя бейджей ")])]):t._e(),s("v-layout",{staticClass:"text-center ma-3",attrs:{row:""}},t._l(t.friend_interests(),(function(e){return s("v-flex",{key:e,attrs:{xs3:""}},[s("v-icon",{staticClass:"ma-3",attrs:{size:"50",color:"secondary"}},[t._v(" "+t._s(e.badge))]),s("div",{staticClass:"grey--text caption mb-6"},[t._v(" "+t._s(e.text))])],1)})),1)],1),s("v-divider"),s("div",{staticClass:"mt-3"},[s("v-layout",{staticClass:"text-center",attrs:{row:"",wrap:"","justify-space-around":""}},[s("SharePointsDialog",{attrs:{item:t.user}}),s("div",[s("v-btn",{attrs:{target:"_blank",rel:"noopener noreferrer",href:t.malitoGen(),dark:"",color:"indigo"}},[t._v("Связаться")])],1)],1)],1)],1)],1)],1)},fr=[],vr={name:"UserPage",components:{SharePointsDialog:ht},data:function(){return{interest_list:[]}},created:function(){var t=this;this.$store.dispatch("get_interests",this.user.id).then((function(e){t.interest_list=e.data}))},computed:{user:function(){var t=this;return this.$store.getters.users_list.find((function(e){return e.id==t.$route.params.id}))},badges:function(){return this.$store.getters.badges}},methods:{placelabel:function(){var t=this,e=this.$store.getters.users_list.length,r=this.$store.getters.users_list.findIndex((function(e){return t.user===e}))+1;return r+"/"+e},malitoGen:function(){return"https://mail.google.com/mail/?view=cm&fs=1&to="+this.user.email},friend_interests:function(){var t=this;return this.badges.filter((function(e){return t.interest_list.includes(e.badge)}))}}},pr=vr,_r=Object(l["a"])(pr,mr,fr,!1,null,"4e30a9e0",null),hr=_r.exports;r.d(e,"HTTP",(function(){return Cr})),a["default"].config.productionTip=!1,a["default"].use(nr.a),a["default"].use(f.a);e["default"]=new f.a({icons:{iconfont:"md"}});a["default"].use(x["a"]);var gr=function(t,e,r){b.getters.loggedIn?(document.title=t.meta.title,r("/")):r()},br=function(t,e,r){b.getters.loggedIn?0===b.getters.users_list.length?b.dispatch("getallusers").then(r()):r():r("/login")},xr=function(t,e,r){if(b.getters.loggedIn)if(0===b.getters.users_list.length)b.dispatch("getallusers").then((function(){b.getters.teamleadUser||b.getters.adminUser?r():r("/")}));else{if(b.getters.teamleadUser||b.getters.adminUser)return void r();r("/")}else r("/login")},yr=function(t,e,r){if(b.getters.loggedIn)if(0===b.getters.users_list.length)b.dispatch("getallusers").then((function(){b.getters.logged_user.is_staff?r():r(e)}));else{if(b.getters.logged_user.is_staff)return void r();r(e)}else r("/login")},kr=[{path:"/",component:dr,beforeEnter:br,meta:{title:"0"},children:[{path:"/",component:z,beforeEnter:br,meta:{title:"Главная"}},{path:"/users",component:$t,beforeEnter:br,meta:{title:"Коллеги"}},{path:"/users/:id",component:hr,beforeEnter:br,meta:{title:"Коллеги"}},{path:"/shop",component:X,beforeEnter:br,meta:{title:"Маркетплейс"}},{path:"/shop/:id",component:Je,beforeEnter:br,meta:{title:"Маркетплейс"}},{path:"/rating",component:yt,beforeEnter:br,meta:{title:"Рейтинг"}},{path:"/transactions",component:st,beforeEnter:br,meta:{title:"История операций"}},{path:"/feedback",component:R,beforeEnter:br,meta:{title:"Обратная связь"}},{path:"/promotions",beforeEnter:xr,component:ze,meta:{title:"Поощерения"}},{path:"/special",component:Pt,beforeEnter:yr,meta:{title:"Cпециальные возможности"},children:[{path:"",component:se,meta:{title:"Cпециальные возможности"}},{beforeEnter:yr,path:"usermanagement",component:Jt,meta:{title:"Управление пользователями"}},{beforeEnter:yr,path:"marketmanagement",component:ye,meta:{title:"Управление маркетплейсом"}},{beforeEnter:yr,path:"inbox",component:$e,meta:{title:"Почта"}},{beforeEnter:yr,path:"orders",component:sr,meta:{title:"Заказы"}}]}]},{path:"/login",component:J,beforeEnter:gr,meta:{title:"Необходима авторизация"}}],wr=new x["a"]({routes:kr});wr.beforeEach((function(t,e,r){document.title=t.meta.title,r()}));var Cr=h.a.create({baseURL:"http://localhost:8000/api/v1/"});new a["default"]({store:b,router:wr,vuetify:new f.a,render:function(t){return t(d)}}).$mount("#app")},"85ec":function(t,e,r){},"8cfa":function(t,e,r){"use strict";var s=r("52dd"),a=r.n(s);a.a},e336:function(t,e,r){}});
//# sourceMappingURL=app.f9925dc4.js.map